import{u as U,g as te,h as se,i as M,j as le,P as ae,t as re,k as ie,l as b,m as f,n as oe,p as Y,q as s,s as ce,R as j,v as ne,x as ue,y as Ee,C as he,z as me,A as pe,B as ve,D as de,E as Be,F as Ae,G as ge,H as O,I as $,J as ye,K as H,L as Ce}from"./app-Cavey8ZJ.js";const De=["/","/intro.html","/essays/","/projects/","/resources/","/tech/Qt6%20Maintence%20tools%E4%B8%8D%E8%83%BD%E5%AE%89%E8%A3%85Qt5.html","/tech/android%20studio%E6%8D%A2%E6%BA%90.html","/tech/cicd.html","/tech/docker_nginx%E9%83%A8%E7%BD%B2web%E9%A1%B9%E7%9B%AE.html","/tech/docker.html","/tech/github%20%E5%B7%A5%E4%BD%9C%E6%B5%81.html","/tech/","/tech/modint.html","/tech/steam%E6%A8%A1%E7%BB%84%E5%BC%80%E5%8F%91.html","/tech/style.html","/tech/vsocde%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E5%B0%8F%E8%AE%B0.html","/tech/%E3%80%8C%E7%AE%97%E6%9C%AF%E5%85%AC%E7%90%86%E7%B3%BB%E7%BB%9F%201%E3%80%8D%E8%87%AA%E7%84%B6%E6%95%B0.html","/tech/%E4%BD%BF%E7%94%A8capacitor%E5%92%8Cionic%E5%B0%86vue%E9%A1%B9%E7%9B%AE%E8%BF%81%E7%A7%BB%E5%88%B0mobile%E7%AB%AF.html","/tech/%E5%8D%8F%E7%A8%8B(asyncio)%E5%88%B0%E5%BA%95%E9%9C%80%E4%B8%8D%E9%9C%80%E8%A6%81%E5%8A%A0%E9%94%81.html","/tech/%E5%8D%8F%E7%A8%8B.html","/tech/%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84PPT.html","/tech/%E9%97%AD%E5%8C%85%E5%AE%9E%E7%8E%B0%E7%B1%BB.html","/tutorials/","/tutorials/typora%E6%BF%80%E6%B4%BB.html","/resources/html2md/","/tech/DesignPatterns/DesignPrinciples.html","/tech/DesignPatterns/abstractFactory.html","/tech/DesignPatterns/adapter.html","/tech/DesignPatterns/bridge.html","/tech/DesignPatterns/builder.html","/tech/DesignPatterns/composite.html","/tech/DesignPatterns/factory_method.html","/tech/DesignPatterns/","/tech/DesignPatterns/iterator.html","/tech/DesignPatterns/prototype.html","/tech/DesignPatterns/singleton.html","/tech/DesignPatterns/strategy.html","/tech/DesignPatterns/template_method.html","/tech/designASimpileCCompiler/0.html","/tech/designASimpileCCompiler/1.html","/tech/designASimpileCCompiler/2.html","/tech/designASimpileCCompiler/3.html","/tech/designASimpileCCompiler/4.html","/tech/designASimpileCCompiler/5.html","/tech/designASimpileCCompiler/6.html","/tech/designASimpileCCompiler/7.html","/tech/designASimpileCCompiler/8.html","/tech/designASimpileCCompiler/9.html","/404.html","/tech/designASimpileCCompiler/","/category/","/category/build-tools/","/category/cicd/","/category/nginx/","/category/%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7/","/category/docker/","/category/oi/","/category/%E9%A3%8E%E6%A0%BC/","/category/%E6%95%B0%E5%AD%A6/","/category/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","/category/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/","/tag/","/tag/cicd/","/tag/%E9%83%A8%E7%BD%B2/","/tag/docker/","/tag/modint/","/tag/%E9%A3%8E%E6%A0%BC/","/tag/%E5%85%AC%E7%90%86%E7%B3%BB%E7%BB%9F/","/tag/mobile/","/tag/%E6%BF%80%E6%B4%BB/","/tag/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","/tag/typescript/","/tag/%E7%94%9F%E6%88%90%E5%AE%9E%E4%BE%8B/","/tag/%E5%88%86%E5%BC%80%E8%80%83%E8%99%91/","/tag/%E5%AE%B9%E5%99%A8%E4%B8%8E%E5%86%85%E5%AE%B9%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7/","/tag/%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95/","/tag/%E4%BA%A4%E7%BB%99%E5%AD%90%E7%B1%BB/","/tag/%E6%95%B4%E4%BD%93%E7%9A%84%E6%9B%BF%E6%8D%A2%E7%AE%97%E6%B3%95/","/tag/c/","/tag/%E7%BC%96%E8%AF%91%E5%99%A8/","/tag/%E8%A7%A3%E9%87%8A%E5%99%A8/","/article/","/star/","/timeline/"],Fe="SEARCH_PRO_QUERY_HISTORY",B=U(Fe,[]),fe=()=>{const{queryHistoryCount:l}=H,a=l>0;return{enabled:a,queryHistory:B,addQueryHistory:r=>{a&&(B.value=Array.from(new Set([r,...B.value.slice(0,l-1)])))},removeQueryHistory:r=>{B.value=[...B.value.slice(0,r),...B.value.slice(r+1)]}}},q=l=>De[l.id]+("anchor"in l?`#${l.anchor}`:""),He="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:I}=H,A=U(He,[]),Se=()=>{const l=I>0;return{enabled:l,resultHistory:A,addResultHistory:a=>{if(l){const r={link:q(a),display:a.display};"header"in a&&(r.header=a.header),A.value=[r,...A.value.slice(0,I-1)]}},removeResultHistory:a=>{A.value=[...A.value.slice(0,a),...A.value.slice(a+1)]}}},ke=l=>{const a=he(),r=M(),S=me(),o=b(0),C=f(()=>o.value>0),p=pe([]);return ve(()=>{const{search:v,terminate:k}=de(),g=ye(u=>{const y=u.join(" "),{searchFilter:P=m=>m,splitWord:R,suggestionsFilter:L,...d}=a.value;y?(o.value+=1,v(u.join(" "),r.value,d).then(m=>P(m,y,r.value,S.value)).then(m=>{o.value-=1,p.value=m}).catch(m=>{console.warn(m),o.value-=1,o.value||(p.value=[])})):p.value=[]},H.searchDelay-H.suggestDelay);Y([l,r],([u])=>g(u),{immediate:!0}),Be(()=>{k()})}),{isSearching:C,results:p}};var Re=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:a}){const r=se(),S=M(),o=le(ae),{enabled:C,addQueryHistory:p,queryHistory:v,removeQueryHistory:k}=fe(),{enabled:g,resultHistory:u,addResultHistory:y,removeResultHistory:P}=Se(),R=C||g,L=re(l,"queries"),{results:d,isSearching:m}=ke(L),i=ie({isQuery:!0,index:0}),E=b(0),h=b(0),_=f(()=>R&&(v.value.length>0||u.value.length>0)),Q=f(()=>d.value.length>0),w=f(()=>d.value[E.value]||null),z=()=>{const{isQuery:e,index:t}=i;t===0?(i.isQuery=!e,i.index=e?u.value.length-1:v.value.length-1):i.index=t-1},G=()=>{const{isQuery:e,index:t}=i;t===(e?v.value.length-1:u.value.length-1)?(i.isQuery=!e,i.index=0):i.index=t+1},J=()=>{E.value=E.value>0?E.value-1:d.value.length-1,h.value=w.value.contents.length-1},K=()=>{E.value=E.value<d.value.length-1?E.value+1:0,h.value=0},V=()=>{h.value<w.value.contents.length-1?h.value+=1:K()},N=()=>{h.value>0?h.value-=1:J()},x=e=>e.map(t=>Ce(t)?t:s(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=Ae[e.index]||"$content",[c,F=""]=ge(t)?t[S.value].split("$content"):t.split("$content");return e.display.map(n=>s("div",x([c,...n,F])))}return e.display.map(t=>s("div",x(t)))},D=()=>{E.value=0,h.value=0,a("updateQuery",""),a("close")},X=()=>C?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},o.value.queryHistory),v.value.map((e,t)=>s("div",{class:["search-pro-result-item",{active:i.isQuery&&i.index===t}],onClick:()=>{a("updateQuery",e)}},[s(O,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},e),s("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:c=>{c.preventDefault(),c.stopPropagation(),k(t)}})]))])):null,Z=()=>g?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},o.value.resultHistory),u.value.map((e,t)=>s(j,{to:e.link,class:["search-pro-result-item",{active:!i.isQuery&&i.index===t}],onClick:()=>{D()}},()=>[s(O,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[e.header?s("div",{class:"content-header"},e.header):null,s("div",e.display.map(c=>x(c)).flat())]),s("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:c=>{c.preventDefault(),c.stopPropagation(),P(t)}})]))])):null;return oe("keydown",e=>{if(l.isFocusing){if(Q.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const t=w.value.contents[h.value];p(l.queries.join(" ")),y(t),r.push(q(t)),D()}}else if(g){if(e.key==="ArrowUp")z();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:t}=i;i.isQuery?(a("updateQuery",v.value[t]),e.preventDefault()):(r.push(u.value[t].link),D())}}}}),Y([E,h],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>s("div",{class:["search-pro-result-wrapper",{empty:l.queries.length?!Q.value:!_.value}],id:"search-pro-results"},l.queries.length?m.value?s(ce,{hint:o.value.searching}):Q.value?s("ul",{class:"search-pro-result-list"},d.value.map(({title:e,contents:t},c)=>{const F=E.value===c;return s("li",{class:["search-pro-result-list-item",{active:F}]},[s("div",{class:"search-pro-result-title"},e||o.value.defaultTitle),t.map((n,ee)=>{const T=F&&h.value===ee;return s(j,{to:q(n),class:["search-pro-result-item",{active:T,"aria-selected":T}],onClick:()=>{p(l.queries.join(" ")),y(n),D()}},()=>[n.type==="text"?null:s(n.type==="title"?ne:n.type==="heading"?ue:Ee,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[n.type==="text"&&n.header?s("div",{class:"content-header"},n.header):null,s("div",W(n))])])})])})):o.value.emptyResult:R?_.value?[X(),Z()]:o.value.emptyHistory:o.value.emptyResult)}});export{Re as default};
