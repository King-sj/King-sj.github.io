import{_ as c,r as p,o as l,c as u,a as i,d as k,w as a,b as n,e as s}from"./app-ydJZRkiW.js";const r="/assets/Closures-Bb-D5Kse.png",d={},m=n("h1",{id:"闭包实现类",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#闭包实现类"},[n("span",null,"闭包实现类")])],-1),b=n("p",null,"你是否曾经想过，不用类也能封装数据和方法？这篇文章将带你走进闭包的奇妙世界，展示如何用闭包来实现这一点。通过一个有趣的代码示例，你将看到闭包是如何捕获变量并提供类似类的功能的。准备好了吗？让我们开始这段有趣的旅程吧！",-1),v=n("div",{class:"language-cpp line-numbers-mode","data-ext":"cpp","data-title":"cpp"},[n("pre",{class:"language-cpp"},[n("code",null,[n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},"<iostream>")]),s(`
`),n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},"<string>")]),s(`
`),n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},"<functional>")]),s(`
`),n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},"<vector>")]),s(`
`),n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},"<memory>")]),s(`

`),n("span",{class:"token keyword"},"using"),s(),n("span",{class:"token keyword"},"namespace"),s(" std"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// 1. 封装 (Encapsulation) - 状态_x被封装在闭包中"),s(`
`),n("span",{class:"token keyword"},"auto"),s(),n("span",{class:"token function"},"createCounter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"int"),s(" x"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"int"),n("span",{class:"token operator"},"*"),s(" _x "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token keyword"},"int"),n("span",{class:"token punctuation"},"("),s("x"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"auto"),s(" toString "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),s("_x"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"->"),s(" string "),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token string"},'"Counter x: "'),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token function"},"to_string"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"*"),s("_x"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"auto"),s(" add "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),s("_x"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"*"),s("_x"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"++"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"auto"),s(" remove "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),s("_x"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token keyword"},"delete"),s(" _x"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token class-name"},"Counter"),s(),n("span",{class:"token punctuation"},"{"),s(`
        function`),n("span",{class:"token operator"},"<"),n("span",{class:"token function"},"string"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},">"),s(" toString"),n("span",{class:"token punctuation"},";"),s(`
        function`),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"void"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},">"),s(" add"),n("span",{class:"token punctuation"},";"),s(`
        function`),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"void"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},">"),s(" remove"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"return"),s(" Counter"),n("span",{class:"token punctuation"},"{"),s("toString"),n("span",{class:"token punctuation"},","),s(" add"),n("span",{class:"token punctuation"},","),s(" remove"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// 2. 抽象 (Abstraction) - 定义一个“形状”的抽象接口"),s(`
`),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token class-name"},"Shape"),s(),n("span",{class:"token punctuation"},"{"),s(`
    function`),n("span",{class:"token operator"},"<"),n("span",{class:"token function"},"string"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},">"),s(" toString"),n("span",{class:"token punctuation"},";"),s(`
    function`),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"double"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},">"),s(" area"),n("span",{class:"token punctuation"},";"),s(`
    function`),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"void"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},">"),s(" draw"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// 3. 继承 (Inheritance) 和 多态 (Polymorphism)"),s(`
`),n("span",{class:"token comment"},"// 基“类”工厂函数：ShapeBase"),s(`
`),n("span",{class:"token keyword"},"auto"),s(),n("span",{class:"token function"},"ShapeBase"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"const"),s(" string"),n("span",{class:"token operator"},"&"),s(" name"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"double"),s(" value"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    string`),n("span",{class:"token operator"},"*"),s(" _name "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token function"},"string"),n("span",{class:"token punctuation"},"("),s("name"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"double"),n("span",{class:"token operator"},"*"),s(" _value "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token keyword"},"double"),n("span",{class:"token punctuation"},"("),s("value"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// 基类的公共方法"),s(`
    `),n("span",{class:"token keyword"},"auto"),s(" baseToString "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),s("_name"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"->"),s(" string "),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token string"},'"Shape: "'),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token operator"},"*"),s(" _name"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"auto"),s(" baseGetValue "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),s("_value"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"->"),s(),n("span",{class:"token keyword"},"double"),s(),n("span",{class:"token punctuation"},"{"),s(),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token operator"},"*"),s(" _value"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"auto"),s(" baseRemove "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),s("_name"),n("span",{class:"token punctuation"},","),s(" _value"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"delete"),s(" _name"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"delete"),s(" _value"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token class-name"},"Base"),s(),n("span",{class:"token punctuation"},"{"),s(`
        function`),n("span",{class:"token operator"},"<"),n("span",{class:"token function"},"string"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},">"),s(" toString"),n("span",{class:"token punctuation"},";"),s(`
        function`),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"double"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},">"),s(" getValue"),n("span",{class:"token punctuation"},";"),s(`
        function`),n("span",{class:"token operator"},"<"),n("span",{class:"token keyword"},"void"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},">"),s(" remove"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"return"),s(" Base"),n("span",{class:"token punctuation"},"{"),s("baseToString"),n("span",{class:"token punctuation"},","),s(" baseGetValue"),n("span",{class:"token punctuation"},","),s(" baseRemove"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// 派生“类”1: Circle，继承自ShapeBase，并实现area和draw"),s(`
`),n("span",{class:"token keyword"},"auto"),s(),n("span",{class:"token function"},"createCircle"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"const"),s(" string"),n("span",{class:"token operator"},"&"),s(" name"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"double"),s(" radius"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// 组合：捕获基类实例，模拟继承"),s(`
    `),n("span",{class:"token keyword"},"auto"),s(" base "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"ShapeBase"),n("span",{class:"token punctuation"},"("),s("name"),n("span",{class:"token punctuation"},","),s(" radius"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"auto"),s(" area "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),s("base"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"->"),s(),n("span",{class:"token keyword"},"double"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"double"),s(" r "),n("span",{class:"token operator"},"="),s(" base"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getValue"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token number"},"3.14159"),s(),n("span",{class:"token operator"},"*"),s(" r "),n("span",{class:"token operator"},"*"),s(" r"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"auto"),s(" draw "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),s("base"),n("span",{class:"token punctuation"},","),s(" area"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        cout `),n("span",{class:"token operator"},"<<"),s(),n("span",{class:"token string"},'"Drawing Circle: "'),s(),n("span",{class:"token operator"},"<<"),s(" base"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"<<"),s(),n("span",{class:"token string"},'", area: "'),s(),n("span",{class:"token operator"},"<<"),s(),n("span",{class:"token function"},"area"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"<<"),s(" endl"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// 重写toString，添加派生类信息"),s(`
    `),n("span",{class:"token keyword"},"auto"),s(" toString "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),s("base"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"->"),s(" string "),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(" base"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token string"},'" (Circle)"'),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"auto"),s(" remove "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),s("base"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(" base"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"remove"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"return"),s(" Shape"),n("span",{class:"token punctuation"},"{"),s("toString"),n("span",{class:"token punctuation"},","),s(" area"),n("span",{class:"token punctuation"},","),s(" draw"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// 派生“类”2: Square，继承自相同的抽象接口，但不同实现"),s(`
`),n("span",{class:"token keyword"},"auto"),s(),n("span",{class:"token function"},"createSquare"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"const"),s(" string"),n("span",{class:"token operator"},"&"),s(" name"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"double"),s(" side"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"auto"),s(" base "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"ShapeBase"),n("span",{class:"token punctuation"},"("),s("name"),n("span",{class:"token punctuation"},","),s(" side"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"auto"),s(" area "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),s("base"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"->"),s(),n("span",{class:"token keyword"},"double"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"double"),s(" s "),n("span",{class:"token operator"},"="),s(" base"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getValue"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"return"),s(" s "),n("span",{class:"token operator"},"*"),s(" s"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"auto"),s(" draw "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),s("base"),n("span",{class:"token punctuation"},","),s(" area"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        cout `),n("span",{class:"token operator"},"<<"),s(),n("span",{class:"token string"},'"Drawing Square: "'),s(),n("span",{class:"token operator"},"<<"),s(" base"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"<<"),s(),n("span",{class:"token string"},'", area: "'),s(),n("span",{class:"token operator"},"<<"),s(),n("span",{class:"token function"},"area"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"<<"),s(" endl"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"auto"),s(" toString "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),s("base"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"->"),s(" string "),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token keyword"},"return"),s(" base"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token string"},'" (Square)"'),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"auto"),s(" remove "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),s("base"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(" base"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"remove"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"return"),s(" Shape"),n("span",{class:"token punctuation"},"{"),s("toString"),n("span",{class:"token punctuation"},","),s(" area"),n("span",{class:"token punctuation"},","),s(" draw"),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"int"),s(),n("span",{class:"token function"},"main"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    cout `),n("span",{class:"token operator"},"<<"),s(),n("span",{class:"token string"},'"=== 1. 封装示例 ==="'),s(),n("span",{class:"token operator"},"<<"),s(" endl"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"auto"),s(" counter "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"createCounter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    cout `),n("span",{class:"token operator"},"<<"),s(" counter"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"<<"),s(" endl"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// x: 5"),s(`
    counter`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    cout `),n("span",{class:"token operator"},"<<"),s(" counter"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"<<"),s(" endl"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// x: 6"),s(`
    counter`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"remove"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    cout `),n("span",{class:"token operator"},"<<"),s(),n("span",{class:"token string"},'"\\n=== 2. 抽象、继承与多态示例 ==="'),s(),n("span",{class:"token operator"},"<<"),s(" endl"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// 多态：将不同的派生类对象统一存放在基类抽象接口的容器中"),s(`
    vector`),n("span",{class:"token operator"},"<"),s("Shape"),n("span",{class:"token operator"},">"),s(" shapes"),n("span",{class:"token punctuation"},";"),s(`
    shapes`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push_back"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"createCircle"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"MyCircle"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"3.0"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    shapes`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push_back"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"createSquare"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"MySquare"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"2.5"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"auto"),n("span",{class:"token operator"},"&"),s(" shape "),n("span",{class:"token operator"},":"),s(" shapes"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token comment"},"// 同一接口，不同行为"),s(`
        cout `),n("span",{class:"token operator"},"<<"),s(" shape"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"<<"),s(),n("span",{class:"token string"},'", Area: "'),s(),n("span",{class:"token operator"},"<<"),s(" shape"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"area"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"<<"),s(" endl"),n("span",{class:"token punctuation"},";"),s(`
        shape`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"draw"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 多态调用"),s(`
        cout `),n("span",{class:"token operator"},"<<"),s(),n("span",{class:"token string"},'"---"'),s(),n("span",{class:"token operator"},"<<"),s(" endl"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token comment"},"// 释放资源"),s(`
    `),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"auto"),n("span",{class:"token operator"},"&"),s(" shape "),n("span",{class:"token operator"},":"),s(" shapes"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        `),n("span",{class:"token comment"},"// 通常remove需要被调用，这里演示，实际需注意生命周期管理"),s(`
        `),n("span",{class:"token comment"},"// shape.remove(); // 此例中shape持有base的副本，base.remove会释放资源"),s(`
        `),n("span",{class:"token comment"},"// 更安全的做法是使用智能指针，但示例为展示闭包机制，暂不引入"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),f=n("div",{class:"language-c line-numbers-mode","data-ext":"c","data-title":"c"},[n("pre",{class:"language-c"},[n("code",null,[n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},"<stdio.h>")]),s(`
`),n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},"<stdlib.h>")]),s(`
`),n("span",{class:"token macro property"},[n("span",{class:"token directive-hash"},"#"),n("span",{class:"token directive keyword"},"include"),s(),n("span",{class:"token string"},"<string.h>")]),s(`

`),n("span",{class:"token comment"},'// === 1. 封装（Encapsulation）: Counter "类" ==='),s(`

`),n("span",{class:"token comment"},"// Counter 结构体（模拟类）"),s(`
`),n("span",{class:"token keyword"},"typedef"),s(),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token class-name"},"Counter"),s(" Counter"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token class-name"},"Counter"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// 数据成员（原闭包捕获的状态）"),s(`
    `),n("span",{class:"token keyword"},"int"),s(" x"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token comment"},"// 方法（函数指针）"),s(`
    `),n("span",{class:"token keyword"},"char"),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"*"),s("toString"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),s("Counter"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"*"),s("add"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),s("Counter"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"*"),s("remove"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),s("Counter"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// Counter 方法的函数实现"),s(`
`),n("span",{class:"token keyword"},"char"),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token function"},"Counter_toString"),n("span",{class:"token punctuation"},"("),s("Counter"),n("span",{class:"token operator"},"*"),s(" self"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"char"),n("span",{class:"token operator"},"*"),s(" buffer "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"char"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),n("span",{class:"token function"},"malloc"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"50"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token keyword"},"sizeof"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"char"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token function"},"snprintf"),n("span",{class:"token punctuation"},"("),s("buffer"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"50"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"Counter x: %d"'),n("span",{class:"token punctuation"},","),s(" self"),n("span",{class:"token operator"},"->"),s("x"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"return"),s(" buffer"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 调用者负责释放"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"Counter_add"),n("span",{class:"token punctuation"},"("),s("Counter"),n("span",{class:"token operator"},"*"),s(" self"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    self`),n("span",{class:"token operator"},"->"),s("x"),n("span",{class:"token operator"},"++"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"Counter_remove"),n("span",{class:"token punctuation"},"("),s("Counter"),n("span",{class:"token operator"},"*"),s(" self"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// 由于数据直接嵌入结构体，无需特殊清理"),s(`
    `),n("span",{class:"token function"},"free"),n("span",{class:"token punctuation"},"("),s("self"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 释放整个结构体"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},'// Counter 的"构造函数"'),s(`
Counter`),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token function"},"createCounter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"int"),s(" x"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    Counter`),n("span",{class:"token operator"},"*"),s(" counter "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("Counter"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),n("span",{class:"token function"},"malloc"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"sizeof"),n("span",{class:"token punctuation"},"("),s("Counter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    counter`),n("span",{class:"token operator"},"->"),s("x "),n("span",{class:"token operator"},"="),s(" x"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 初始化数据"),s(`
    `),n("span",{class:"token comment"},"// 绑定方法"),s(`
    counter`),n("span",{class:"token operator"},"->"),s("toString "),n("span",{class:"token operator"},"="),s(" Counter_toString"),n("span",{class:"token punctuation"},";"),s(`
    counter`),n("span",{class:"token operator"},"->"),s("add "),n("span",{class:"token operator"},"="),s(" Counter_add"),n("span",{class:"token punctuation"},";"),s(`
    counter`),n("span",{class:"token operator"},"->"),s("remove "),n("span",{class:"token operator"},"="),s(" Counter_remove"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"return"),s(" counter"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},'// === 2. 抽象（Abstraction）: Shape "基类" ==='),s(`

`),n("span",{class:"token comment"},"// Shape 结构体（抽象接口）"),s(`
`),n("span",{class:"token keyword"},"typedef"),s(),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token class-name"},"Shape"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token comment"},"// 方法（函数指针）"),s(`
    `),n("span",{class:"token keyword"},"char"),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"*"),s("toString"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token class-name"},"Shape"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"double"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"*"),s("area"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token class-name"},"Shape"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"*"),s("draw"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token class-name"},"Shape"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"*"),s("remove"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token class-name"},"Shape"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(" Shape"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// === 3. 继承（Inheritance）: ShapeBase 及其派生类 ==="),s(`

`),n("span",{class:"token comment"},"// ShapeBase 结构体（基类）"),s(`
`),n("span",{class:"token keyword"},"typedef"),s(),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token keyword"},"char"),n("span",{class:"token operator"},"*"),s(" name"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"double"),s(" value"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(" ShapeBase"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// ShapeBase 的初始化函数"),s(`
`),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"ShapeBase_init"),n("span",{class:"token punctuation"},"("),s("ShapeBase"),n("span",{class:"token operator"},"*"),s(" base"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token keyword"},"char"),n("span",{class:"token operator"},"*"),s(" name"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"double"),s(" value"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    base`),n("span",{class:"token operator"},"->"),s("name "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"char"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),n("span",{class:"token function"},"malloc"),n("span",{class:"token punctuation"},"("),n("span",{class:"token function"},"strlen"),n("span",{class:"token punctuation"},"("),s("name"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"+"),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token function"},"strcpy"),n("span",{class:"token punctuation"},"("),s("base"),n("span",{class:"token operator"},"->"),s("name"),n("span",{class:"token punctuation"},","),s(" name"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    base`),n("span",{class:"token operator"},"->"),s("value "),n("span",{class:"token operator"},"="),s(" value"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// ShapeBase 的清理函数"),s(`
`),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"ShapeBase_remove"),n("span",{class:"token punctuation"},"("),s("ShapeBase"),n("span",{class:"token operator"},"*"),s(" base"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function"},"free"),n("span",{class:"token punctuation"},"("),s("base"),n("span",{class:"token operator"},"->"),s("name"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// Circle 结构体（派生自 ShapeBase）"),s(`
`),n("span",{class:"token keyword"},"typedef"),s(),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token punctuation"},"{"),s(`
    Shape shape`),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 必须是第一个成员，实现多态"),s(`
    ShapeBase base`),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 嵌套基类（模拟继承）"),s(`
    `),n("span",{class:"token comment"},"// 派生类可添加额外成员"),s(`
`),n("span",{class:"token punctuation"},"}"),s(" Circle"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// Circle 的方法实现"),s(`
`),n("span",{class:"token keyword"},"char"),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token function"},"Circle_toString"),n("span",{class:"token punctuation"},"("),s("Shape"),n("span",{class:"token operator"},"*"),s(" shape"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    Circle`),n("span",{class:"token operator"},"*"),s(" self "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("Circle"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),s("shape"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 强制转换"),s(`
    `),n("span",{class:"token keyword"},"char"),n("span",{class:"token operator"},"*"),s(" buffer "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"char"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),n("span",{class:"token function"},"malloc"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"100"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token keyword"},"sizeof"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"char"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token function"},"snprintf"),n("span",{class:"token punctuation"},"("),s("buffer"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"100"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"Shape: %s (Circle)"'),n("span",{class:"token punctuation"},","),s(" self"),n("span",{class:"token operator"},"->"),s("base"),n("span",{class:"token punctuation"},"."),s("name"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"return"),s(" buffer"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"double"),s(),n("span",{class:"token function"},"Circle_area"),n("span",{class:"token punctuation"},"("),s("Shape"),n("span",{class:"token operator"},"*"),s(" shape"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    Circle`),n("span",{class:"token operator"},"*"),s(" self "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("Circle"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),s("shape"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"double"),s(" r "),n("span",{class:"token operator"},"="),s(" self"),n("span",{class:"token operator"},"->"),s("base"),n("span",{class:"token punctuation"},"."),s("value"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token number"},"3.14159"),s(),n("span",{class:"token operator"},"*"),s(" r "),n("span",{class:"token operator"},"*"),s(" r"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"Circle_draw"),n("span",{class:"token punctuation"},"("),s("Shape"),n("span",{class:"token operator"},"*"),s(" shape"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    Circle`),n("span",{class:"token operator"},"*"),s(" self "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("Circle"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),s("shape"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"double"),s(" a "),n("span",{class:"token operator"},"="),s(" shape"),n("span",{class:"token operator"},"->"),n("span",{class:"token function"},"area"),n("span",{class:"token punctuation"},"("),s("shape"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token function"},"printf"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Drawing Circle: %s, area: %f\\n"'),n("span",{class:"token punctuation"},","),s(" self"),n("span",{class:"token operator"},"->"),s("base"),n("span",{class:"token punctuation"},"."),s("name"),n("span",{class:"token punctuation"},","),s(" a"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"Circle_remove"),n("span",{class:"token punctuation"},"("),s("Shape"),n("span",{class:"token operator"},"*"),s(" shape"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    Circle`),n("span",{class:"token operator"},"*"),s(" self "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("Circle"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),s("shape"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token function"},"ShapeBase_remove"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("self"),n("span",{class:"token operator"},"->"),s("base"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token function"},"free"),n("span",{class:"token punctuation"},"("),s("self"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},'// Circle 的"构造函数"'),s(`
Shape`),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token function"},"createCircle"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token keyword"},"char"),n("span",{class:"token operator"},"*"),s(" name"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"double"),s(" radius"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    Circle`),n("span",{class:"token operator"},"*"),s(" circle "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("Circle"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),n("span",{class:"token function"},"malloc"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"sizeof"),n("span",{class:"token punctuation"},"("),s("Circle"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token function"},"ShapeBase_init"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("circle"),n("span",{class:"token operator"},"->"),s("base"),n("span",{class:"token punctuation"},","),s(" name"),n("span",{class:"token punctuation"},","),s(" radius"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// 创建Shape接口（多态）"),s(`
    Shape`),n("span",{class:"token operator"},"*"),s(" shape "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("Shape"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),s("circle"),n("span",{class:"token punctuation"},";"),s(`
    shape`),n("span",{class:"token operator"},"->"),s("toString "),n("span",{class:"token operator"},"="),s(" Circle_toString"),n("span",{class:"token punctuation"},";"),s(`
    shape`),n("span",{class:"token operator"},"->"),s("area "),n("span",{class:"token operator"},"="),s(" Circle_area"),n("span",{class:"token punctuation"},";"),s(`
    shape`),n("span",{class:"token operator"},"->"),s("draw "),n("span",{class:"token operator"},"="),s(" Circle_draw"),n("span",{class:"token punctuation"},";"),s(`
    shape`),n("span",{class:"token operator"},"->"),s("remove "),n("span",{class:"token operator"},"="),s(" Circle_remove"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"return"),s(" shape"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// Square 结构体（派生自 ShapeBase）"),s(`
`),n("span",{class:"token keyword"},"typedef"),s(),n("span",{class:"token keyword"},"struct"),s(),n("span",{class:"token punctuation"},"{"),s(`
    Shape shape`),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 必须是第一个成员"),s(`
    ShapeBase base`),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 嵌套基类"),s(`
`),n("span",{class:"token punctuation"},"}"),s(" Square"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token comment"},"// Square 的方法实现"),s(`
`),n("span",{class:"token keyword"},"char"),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token function"},"Square_toString"),n("span",{class:"token punctuation"},"("),s("Shape"),n("span",{class:"token operator"},"*"),s(" shape"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    Square`),n("span",{class:"token operator"},"*"),s(" self "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("Square"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),s("shape"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"char"),n("span",{class:"token operator"},"*"),s(" buffer "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"char"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),n("span",{class:"token function"},"malloc"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"100"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token keyword"},"sizeof"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"char"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token function"},"snprintf"),n("span",{class:"token punctuation"},"("),s("buffer"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"100"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"Shape: %s (Square)"'),n("span",{class:"token punctuation"},","),s(" self"),n("span",{class:"token operator"},"->"),s("base"),n("span",{class:"token punctuation"},"."),s("name"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"return"),s(" buffer"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"double"),s(),n("span",{class:"token function"},"Square_area"),n("span",{class:"token punctuation"},"("),s("Shape"),n("span",{class:"token operator"},"*"),s(" shape"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    Square`),n("span",{class:"token operator"},"*"),s(" self "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("Square"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),s("shape"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"double"),s(" s "),n("span",{class:"token operator"},"="),s(" self"),n("span",{class:"token operator"},"->"),s("base"),n("span",{class:"token punctuation"},"."),s("value"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"return"),s(" s "),n("span",{class:"token operator"},"*"),s(" s"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"Square_draw"),n("span",{class:"token punctuation"},"("),s("Shape"),n("span",{class:"token operator"},"*"),s(" shape"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    Square`),n("span",{class:"token operator"},"*"),s(" self "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("Square"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),s("shape"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"double"),s(" a "),n("span",{class:"token operator"},"="),s(" shape"),n("span",{class:"token operator"},"->"),n("span",{class:"token function"},"area"),n("span",{class:"token punctuation"},"("),s("shape"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token function"},"printf"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Drawing Square: %s, area: %f\\n"'),n("span",{class:"token punctuation"},","),s(" self"),n("span",{class:"token operator"},"->"),s("base"),n("span",{class:"token punctuation"},"."),s("name"),n("span",{class:"token punctuation"},","),s(" a"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token keyword"},"void"),s(),n("span",{class:"token function"},"Square_remove"),n("span",{class:"token punctuation"},"("),s("Shape"),n("span",{class:"token operator"},"*"),s(" shape"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    Square`),n("span",{class:"token operator"},"*"),s(" self "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("Square"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),s("shape"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token function"},"ShapeBase_remove"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("self"),n("span",{class:"token operator"},"->"),s("base"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token function"},"free"),n("span",{class:"token punctuation"},"("),s("self"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},'// Square 的"构造函数"'),s(`
Shape`),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token function"},"createSquare"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token keyword"},"char"),n("span",{class:"token operator"},"*"),s(" name"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"double"),s(" side"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    Square`),n("span",{class:"token operator"},"*"),s(" square "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("Square"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),n("span",{class:"token function"},"malloc"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"sizeof"),n("span",{class:"token punctuation"},"("),s("Square"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token function"},"ShapeBase_init"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"&"),s("square"),n("span",{class:"token operator"},"->"),s("base"),n("span",{class:"token punctuation"},","),s(" name"),n("span",{class:"token punctuation"},","),s(" side"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    Shape`),n("span",{class:"token operator"},"*"),s(" shape "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"("),s("Shape"),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),s("square"),n("span",{class:"token punctuation"},";"),s(`
    shape`),n("span",{class:"token operator"},"->"),s("toString "),n("span",{class:"token operator"},"="),s(" Square_toString"),n("span",{class:"token punctuation"},";"),s(`
    shape`),n("span",{class:"token operator"},"->"),s("area "),n("span",{class:"token operator"},"="),s(" Square_area"),n("span",{class:"token punctuation"},";"),s(`
    shape`),n("span",{class:"token operator"},"->"),s("draw "),n("span",{class:"token operator"},"="),s(" Square_draw"),n("span",{class:"token punctuation"},";"),s(`
    shape`),n("span",{class:"token operator"},"->"),s("remove "),n("span",{class:"token operator"},"="),s(" Square_remove"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"return"),s(" shape"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`

`),n("span",{class:"token comment"},"// === 主函数（测试代码）==="),s(`
`),n("span",{class:"token keyword"},"int"),s(),n("span",{class:"token function"},"main"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token function"},"printf"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"=== 1. 封装示例 ===\\n"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    Counter`),n("span",{class:"token operator"},"*"),s(" counter "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"createCounter"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"char"),n("span",{class:"token operator"},"*"),s(" str1 "),n("span",{class:"token operator"},"="),s(" counter"),n("span",{class:"token operator"},"->"),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),s("counter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token function"},"printf"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"%s\\n"'),n("span",{class:"token punctuation"},","),s(" str1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token function"},"free"),n("span",{class:"token punctuation"},"("),s("str1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    counter`),n("span",{class:"token operator"},"->"),n("span",{class:"token function"},"add"),n("span",{class:"token punctuation"},"("),s("counter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"char"),n("span",{class:"token operator"},"*"),s(" str2 "),n("span",{class:"token operator"},"="),s(" counter"),n("span",{class:"token operator"},"->"),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),s("counter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token function"},"printf"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"%s\\n"'),n("span",{class:"token punctuation"},","),s(" str2"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token function"},"free"),n("span",{class:"token punctuation"},"("),s("str2"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    counter`),n("span",{class:"token operator"},"->"),n("span",{class:"token function"},"remove"),n("span",{class:"token punctuation"},"("),s("counter"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 释放Counter"),s(`

    `),n("span",{class:"token function"},"printf"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"\\n=== 2. 抽象、继承与多态示例 ===\\n"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"// 模拟多态容器（替代std::vector<Shape>）"),s(`
    Shape`),n("span",{class:"token operator"},"*"),s(" shapes"),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 固定数组简化示例"),s(`
    shapes`),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"createCircle"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"MyCircle"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"3.0"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    shapes`),n("span",{class:"token punctuation"},"["),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"createSquare"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"MySquare"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"2.5"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"int"),s(" i "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(" i "),n("span",{class:"token operator"},"<"),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},";"),s(" i"),n("span",{class:"token operator"},"++"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        Shape`),n("span",{class:"token operator"},"*"),s(" shape "),n("span",{class:"token operator"},"="),s(" shapes"),n("span",{class:"token punctuation"},"["),s("i"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"char"),n("span",{class:"token operator"},"*"),s(" desc "),n("span",{class:"token operator"},"="),s(" shape"),n("span",{class:"token operator"},"->"),n("span",{class:"token function"},"toString"),n("span",{class:"token punctuation"},"("),s("shape"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token keyword"},"double"),s(" a "),n("span",{class:"token operator"},"="),s(" shape"),n("span",{class:"token operator"},"->"),n("span",{class:"token function"},"area"),n("span",{class:"token punctuation"},"("),s("shape"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token function"},"printf"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"%s, Area: %f\\n"'),n("span",{class:"token punctuation"},","),s(" desc"),n("span",{class:"token punctuation"},","),s(" a"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        shape`),n("span",{class:"token operator"},"->"),n("span",{class:"token function"},"draw"),n("span",{class:"token punctuation"},"("),s("shape"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token function"},"printf"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"---\\n"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
        `),n("span",{class:"token function"},"free"),n("span",{class:"token punctuation"},"("),s("desc"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 释放toString返回的字符串"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token comment"},"// 释放资源"),s(`
    `),n("span",{class:"token keyword"},"for"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"int"),s(" i "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(" i "),n("span",{class:"token operator"},"<"),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},";"),s(" i"),n("span",{class:"token operator"},"++"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{"),s(`
        shapes`),n("span",{class:"token punctuation"},"["),s("i"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token operator"},"->"),n("span",{class:"token function"},"remove"),n("span",{class:"token punctuation"},"("),s("shapes"),n("span",{class:"token punctuation"},"["),s("i"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),y=n("div",{class:"language-python line-numbers-mode","data-ext":"py","data-title":"py"},[n("pre",{class:"language-python"},[n("code",null,[n("span",{class:"token keyword"},"def"),s(),n("span",{class:"token function"},"extend"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"*"),s("father_class_list"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
  `),n("span",{class:"token keyword"},"def"),s(),n("span",{class:"token function"},"decorator"),n("span",{class:"token punctuation"},"("),s("sub_class"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
    `),n("span",{class:"token keyword"},"def"),s(),n("span",{class:"token function"},"decorator_class"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"*"),s("args"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"**"),s("kwargs"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
      `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token builtin"},"len"),n("span",{class:"token punctuation"},"("),s("father_class_list"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},":"),s(`
          `),n("span",{class:"token keyword"},"return"),s(" sub_class"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"lambda"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token punctuation"},"."),n("span",{class:"token punctuation"},"."),n("span",{class:"token punctuation"},"."),n("span",{class:"token punctuation"},","),n("span",{class:"token operator"},"*"),s("args"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"**"),s("kwargs"),n("span",{class:"token punctuation"},")"),s(`
      `),n("span",{class:"token keyword"},"else"),n("span",{class:"token punctuation"},":"),s(`
        super_obj `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"lambda"),n("span",{class:"token punctuation"},":"),s(),n("span",{class:"token punctuation"},"."),n("span",{class:"token punctuation"},"."),n("span",{class:"token punctuation"},"."),s(`
        `),n("span",{class:"token keyword"},"for"),s(" father_class "),n("span",{class:"token keyword"},"in"),s(" father_class_list"),n("span",{class:"token punctuation"},":"),s(`
          current_super_obj `),n("span",{class:"token operator"},"="),s(" father_class"),n("span",{class:"token punctuation"},"("),s("super_obj"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"*"),s("args"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"**"),s("kwargs"),n("span",{class:"token punctuation"},")"),s(`
          `),n("span",{class:"token keyword"},"for"),s(" k"),n("span",{class:"token punctuation"},","),s("v "),n("span",{class:"token keyword"},"in"),s(" current_super_obj"),n("span",{class:"token punctuation"},"."),s("__dict__"),n("span",{class:"token punctuation"},"."),s("items"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
            `),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token keyword"},"not"),s(" k"),n("span",{class:"token punctuation"},"."),s("startswith"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'__'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
              `),n("span",{class:"token builtin"},"setattr"),n("span",{class:"token punctuation"},"("),s("super_obj"),n("span",{class:"token punctuation"},","),s(" k"),n("span",{class:"token punctuation"},","),s(" v"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token keyword"},"return"),s(" sub_class"),n("span",{class:"token punctuation"},"("),s("super_obj"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"*"),s("args"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"**"),s("kwargs"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"return"),s(` decorator_class
  `),n("span",{class:"token keyword"},"return"),s(` decorator
`),n("span",{class:"token decorator annotation punctuation"},"@extend"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"def"),s(),n("span",{class:"token function"},"Runner"),n("span",{class:"token punctuation"},"("),s("self"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"*"),s("args"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"**"),s("kwargs"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
  self`),n("span",{class:"token punctuation"},"."),s("speed "),n("span",{class:"token operator"},"="),s(" kwargs"),n("span",{class:"token punctuation"},"."),s("get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'speed'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"10"),n("span",{class:"token punctuation"},")"),s(`
  `),n("span",{class:"token keyword"},"def"),s(),n("span",{class:"token function"},"run"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token string-interpolation"},[n("span",{class:"token string"},"f'"),n("span",{class:"token interpolation"},[n("span",{class:"token punctuation"},"{"),s("self"),n("span",{class:"token punctuation"},"."),s("name"),n("span",{class:"token punctuation"},"}")]),n("span",{class:"token string"}," is running at "),n("span",{class:"token interpolation"},[n("span",{class:"token punctuation"},"{"),s("self"),n("span",{class:"token punctuation"},"."),s("speed"),n("span",{class:"token punctuation"},"}")]),n("span",{class:"token string"}," km/h'")]),s(`
  self`),n("span",{class:"token punctuation"},"."),s("run "),n("span",{class:"token operator"},"="),s(` run
  `),n("span",{class:"token keyword"},"return"),s(` self
`),n("span",{class:"token decorator annotation punctuation"},"@extend"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"def"),s(),n("span",{class:"token function"},"Animal"),n("span",{class:"token punctuation"},"("),s("self"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"*"),s("args"),n("span",{class:"token punctuation"},","),n("span",{class:"token operator"},"**"),s("kwargs"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
  self`),n("span",{class:"token punctuation"},"."),s("name "),n("span",{class:"token operator"},"="),s(" kwargs"),n("span",{class:"token punctuation"},"."),s("get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'name'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Unknown'"),n("span",{class:"token punctuation"},")"),s(`

  `),n("span",{class:"token keyword"},"def"),s(),n("span",{class:"token function"},"to_string"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token string-interpolation"},[n("span",{class:"token string"},"f'"),n("span",{class:"token interpolation"},[n("span",{class:"token punctuation"},"{"),s("self"),n("span",{class:"token punctuation"},"."),s("name"),n("span",{class:"token punctuation"},"}")]),n("span",{class:"token string"}," is an animal'")]),s(`

  `),n("span",{class:"token comment"},"# bind the method to the object"),s(`
  self`),n("span",{class:"token punctuation"},"."),s("to_string "),n("span",{class:"token operator"},"="),s(` to_string
  `),n("span",{class:"token keyword"},"return"),s(` self
`),n("span",{class:"token decorator annotation punctuation"},"@extend"),n("span",{class:"token punctuation"},"("),s("Animal"),n("span",{class:"token punctuation"},","),s("Runner"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"def"),s(),n("span",{class:"token function"},"Dog"),n("span",{class:"token punctuation"},"("),s("self"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"*"),s("args"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"**"),s("kwargs"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
  self`),n("span",{class:"token punctuation"},"."),s("age "),n("span",{class:"token operator"},"="),s(" kwargs"),n("span",{class:"token punctuation"},"."),s("get"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'age'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"10"),n("span",{class:"token punctuation"},")"),s(`
  self`),n("span",{class:"token punctuation"},"."),s("super_to_string "),n("span",{class:"token operator"},"="),s(" self"),n("span",{class:"token punctuation"},"."),s(`to_string
  `),n("span",{class:"token keyword"},"def"),s(),n("span",{class:"token function"},"to_string"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},":"),s(`
    `),n("span",{class:"token keyword"},"print"),n("span",{class:"token punctuation"},"("),s("self"),n("span",{class:"token punctuation"},"."),s("super_to_string"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token string-interpolation"},[n("span",{class:"token string"},"f'"),n("span",{class:"token interpolation"},[n("span",{class:"token punctuation"},"{"),s("self"),n("span",{class:"token punctuation"},"."),s("name"),n("span",{class:"token punctuation"},"}")]),n("span",{class:"token string"}," is "),n("span",{class:"token interpolation"},[n("span",{class:"token punctuation"},"{"),s("self"),n("span",{class:"token punctuation"},"."),s("age"),n("span",{class:"token punctuation"},"}")]),n("span",{class:"token string"}," years old, running at "),n("span",{class:"token interpolation"},[n("span",{class:"token punctuation"},"{"),s("self"),n("span",{class:"token punctuation"},"."),s("speed"),n("span",{class:"token punctuation"},"}")]),n("span",{class:"token string"}," km/h'")]),s(`

  `),n("span",{class:"token comment"},"# bind the method to the object"),s(`
  self`),n("span",{class:"token punctuation"},"."),s("to_string "),n("span",{class:"token operator"},"="),s(` to_string
  `),n("span",{class:"token keyword"},"return"),s(` self

dog `),n("span",{class:"token operator"},"="),s(" Dog"),n("span",{class:"token punctuation"},"("),s("name"),n("span",{class:"token operator"},"="),n("span",{class:"token string"},"'Rex'"),n("span",{class:"token punctuation"},","),s(" age"),n("span",{class:"token operator"},"="),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"print"),n("span",{class:"token punctuation"},"("),s("dog"),n("span",{class:"token punctuation"},"."),s("to_string"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token triple-quoted-string string"},`"""
运行结果:
Rex is an animal
Rex is 5 years old, running at 10 km/h
"""`),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),w=n("div",{class:"language-lua line-numbers-mode","data-ext":"lua","data-title":"lua"},[n("pre",{class:"language-lua"},[n("code",null,[n("span",{class:"token comment"},"-- 通过闭包实现类（而不是使用表）"),s(`
`),n("span",{class:"token comment"},"-- 实现：封装、继承、多态、抽象"),s(`

`),n("span",{class:"token comment"},"-- 1. 基类 Animal (抽象类)"),s(`
`),n("span",{class:"token keyword"},"local"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"Animal"),n("span",{class:"token punctuation"},"("),s("name"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token comment"},"-- 【封装】：name 是局部变量，外部无法直接访问，只能通过闭包方法访问"),s(`
    `),n("span",{class:"token comment"},"-- self 是对外暴露的接口表"),s(`
    `),n("span",{class:"token keyword"},"local"),s(" self "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}"),s(`

    `),n("span",{class:"token comment"},"-- 【抽象】：定义接口，基类中可以抛出错误或提供默认实现"),s(`
    `),n("span",{class:"token keyword"},"function"),s(" self"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"speak"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token function"},"error"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},`"Abstract method 'speak' must be implemented by subclass"`),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"end"),s(`

    `),n("span",{class:"token comment"},"-- 公共方法"),s(`
    `),n("span",{class:"token keyword"},"function"),s(" self"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getName"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token keyword"},"return"),s(` name
    `),n("span",{class:"token keyword"},"end"),s(`

    `),n("span",{class:"token keyword"},"return"),s(` self
`),n("span",{class:"token keyword"},"end"),s(`

`),n("span",{class:"token comment"},"-- 2. 子类 Dog"),s(`
`),n("span",{class:"token keyword"},"local"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"Dog"),n("span",{class:"token punctuation"},"("),s("name"),n("span",{class:"token punctuation"},","),s(" breed"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token comment"},"-- 【继承】：首先调用父类构造函数获取实例"),s(`
    `),n("span",{class:"token keyword"},"local"),s(" self "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"Animal"),n("span",{class:"token punctuation"},"("),s("name"),n("span",{class:"token punctuation"},")"),s(`

    `),n("span",{class:"token comment"},"-- 子类私有属性"),s(`
    `),n("span",{class:"token keyword"},"local"),s(" _breed "),n("span",{class:"token operator"},"="),s(` breed

    `),n("span",{class:"token comment"},"-- 保存父类的方法（如果需要调用父类实现）"),s(`
    `),n("span",{class:"token comment"},"-- local super_speak = self.speak"),s(`

    `),n("span",{class:"token comment"},"-- 【多态】：重写父类方法"),s(`
    `),n("span",{class:"token keyword"},"function"),s(" self"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"speak"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token string"},'"Woof! I am "'),s(),n("span",{class:"token operator"},".."),s(" self"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getName"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"end"),s(`

    `),n("span",{class:"token comment"},"-- 子类特有方法"),s(`
    `),n("span",{class:"token keyword"},"function"),s(" self"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getBreed"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token keyword"},"return"),s(` _breed
    `),n("span",{class:"token keyword"},"end"),s(`

    `),n("span",{class:"token keyword"},"return"),s(` self
`),n("span",{class:"token keyword"},"end"),s(`

`),n("span",{class:"token comment"},"-- 3. 子类 Cat"),s(`
`),n("span",{class:"token keyword"},"local"),s(),n("span",{class:"token keyword"},"function"),s(),n("span",{class:"token function"},"Cat"),n("span",{class:"token punctuation"},"("),s("name"),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token comment"},"-- 【继承】"),s(`
    `),n("span",{class:"token keyword"},"local"),s(" self "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"Animal"),n("span",{class:"token punctuation"},"("),s("name"),n("span",{class:"token punctuation"},")"),s(`

    `),n("span",{class:"token comment"},"-- 【多态】：重写父类方法"),s(`
    `),n("span",{class:"token keyword"},"function"),s(" self"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"speak"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token keyword"},"return"),s(),n("span",{class:"token string"},'"Meow! I am "'),s(),n("span",{class:"token operator"},".."),s(" self"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getName"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"end"),s(`

    `),n("span",{class:"token comment"},"-- 子类特有方法"),s(`
    `),n("span",{class:"token keyword"},"function"),s(" self"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"purr"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token keyword"},"return"),s(" self"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getName"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},".."),s(),n("span",{class:"token string"},'" is purring..."'),s(`
    `),n("span",{class:"token keyword"},"end"),s(`

    `),n("span",{class:"token keyword"},"return"),s(` self
`),n("span",{class:"token keyword"},"end"),s(`

`),n("span",{class:"token comment"},"-- --- 测试代码 ---"),s(`

`),n("span",{class:"token function"},"print"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"=== 1. 测试 Dog (继承与多态) ==="'),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"local"),s(" dog "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"Dog"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Buddy"'),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},'"Golden Retriever"'),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token function"},"print"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Name:"'),n("span",{class:"token punctuation"},","),s(" dog"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getName"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s("       "),n("span",{class:"token comment"},"-- 调用父类方法"),s(`
`),n("span",{class:"token function"},"print"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Breed:"'),n("span",{class:"token punctuation"},","),s(" dog"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getBreed"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s("     "),n("span",{class:"token comment"},"-- 调用子类方法"),s(`
`),n("span",{class:"token function"},"print"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Speak:"'),n("span",{class:"token punctuation"},","),s(" dog"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"speak"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s("        "),n("span",{class:"token comment"},"-- 多态行为"),s(`

`),n("span",{class:"token function"},"print"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"\\n=== 2. 测试 Cat (继承与多态) ==="'),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"local"),s(" cat "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"Cat"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Whiskers"'),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token function"},"print"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Name:"'),n("span",{class:"token punctuation"},","),s(" cat"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"getName"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token function"},"print"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Speak:"'),n("span",{class:"token punctuation"},","),s(" cat"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"speak"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token function"},"print"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Action:"'),n("span",{class:"token punctuation"},","),s(" cat"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"purr"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`

`),n("span",{class:"token function"},"print"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"\\n=== 3. 测试封装性 ==="'),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token function"},"print"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"dog.name is:"'),n("span",{class:"token punctuation"},","),s(" dog"),n("span",{class:"token punctuation"},"."),s("name"),n("span",{class:"token punctuation"},")"),s("     "),n("span",{class:"token comment"},"-- nil，无法直接访问闭包内的局部变量"),s(`

`),n("span",{class:"token function"},"print"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"\\n=== 4. 测试抽象性 ==="'),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"local"),s(" status"),n("span",{class:"token punctuation"},","),s(" err "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"pcall"),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"function"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"local"),s(" a "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token function"},"Animal"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Unknown"'),n("span",{class:"token punctuation"},")"),s(`
    a`),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"speak"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"end"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token keyword"},"not"),s(" status "),n("span",{class:"token keyword"},"then"),s(`
    `),n("span",{class:"token function"},"print"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Expected error caught: "'),s(),n("span",{class:"token operator"},".."),s(" err"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"end"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),g=n("figure",null,[n("img",{src:r,alt:"alt text",tabindex:"0",loading:"lazy"}),n("figcaption",null,"alt text")],-1);function h(S,_){const o=p("CodeTabs");return l(),u("div",null,[m,b,i(" more "),k(o,{id:"7",data:[{id:"cpp"},{id:"c"},{id:"python"},{id:"lua"}],"tab-id":"cpp"},{title0:a(({value:t,isActive:e})=>[s("cpp")]),title1:a(({value:t,isActive:e})=>[s("c")]),title2:a(({value:t,isActive:e})=>[s("python")]),title3:a(({value:t,isActive:e})=>[s("lua")]),tab0:a(({value:t,isActive:e})=>[v]),tab1:a(({value:t,isActive:e})=>[f]),tab2:a(({value:t,isActive:e})=>[y]),tab3:a(({value:t,isActive:e})=>[w]),_:1}),g])}const x=c(d,[["render",h],["__file","闭包实现类.html.vue"]]),B=JSON.parse('{"path":"/tech/%E9%97%AD%E5%8C%85%E5%AE%9E%E7%8E%B0%E7%B1%BB.html","title":"闭包实现类","lang":"zh-CN","frontmatter":{"title":"闭包实现类","lang":"zh-CN","date":"2023-08-02T00:00:00.000Z","category":["OI"],"tag":["MODInt"],"description":"你是否曾经想过，不用类也能封装数据和方法？这篇文章将带你走进闭包的奇妙世界，展示如何用闭包来实现这一点。通过一个有趣的代码示例，你将看到闭包是如何捕获变量并提供类似类的功能的。准备好了吗？让我们开始这段有趣的旅程吧！","gitInclude":[],"head":[["meta",{"property":"og:url","content":"https://github.com/King-sj/tech/%E9%97%AD%E5%8C%85%E5%AE%9E%E7%8E%B0%E7%B1%BB.html"}],["meta",{"property":"og:site_name","content":"blog"}],["meta",{"property":"og:title","content":"闭包实现类"}],["meta",{"property":"og:description","content":"你是否曾经想过，不用类也能封装数据和方法？这篇文章将带你走进闭包的奇妙世界，展示如何用闭包来实现这一点。通过一个有趣的代码示例，你将看到闭包是如何捕获变量并提供类似类的功能的。准备好了吗？让我们开始这段有趣的旅程吧！"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"KSJ"}],["meta",{"property":"article:tag","content":"MODInt"}],["meta",{"property":"article:published_time","content":"2023-08-02T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"闭包实现类\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-08-02T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"KSJ\\",\\"url\\":\\"https://github.com/King-sj\\"}]}"]]},"headers":[],"readingTime":{"minutes":6.72,"words":2015},"filePathRelative":"tech/闭包实现类.md","localizedDate":"2023年8月2日","excerpt":"\\n<p>你是否曾经想过，不用类也能封装数据和方法？这篇文章将带你走进闭包的奇妙世界，展示如何用闭包来实现这一点。通过一个有趣的代码示例，你将看到闭包是如何捕获变量并提供类似类的功能的。准备好了吗？让我们开始这段有趣的旅程吧！</p>\\n","autoDesc":true}');export{x as comp,B as data};
