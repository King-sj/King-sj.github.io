import{_ as s,c as t,e as n,o as e}from"./app-DMdjXmEa.js";const p="/assets/image-Dc9IOqtq.png",m={};function r(i,a){return e(),t("div",null,[...a[0]||(a[0]=[n('<p><a href="https://github.com/king-sj/carrobot" target="_blank" rel="noopener noreferrer">项目源码</a></p><p><s>因为想要创新学分，所以选了创新创业智能车课程</s>，项目要求完成智能车的循迹和避障。</p><p>由于笔者不喜欢使用VPL的图形化（<s>报用qWq</s>）, 故而使用手写代码的方式实现。</p><h2 id="主要思路" tabindex="-1"><a class="header-anchor" href="#主要思路"><span>主要思路</span></a></h2><p>通过接发TCP包的方法与智能车进行交互， 创建两个<strong>并行</strong>任务，一个用于实时接收TCP报文来更新小车状态， 一个用于读取小车状态，作出决策并发送报文控制小车。</p><h2 id="编程语言的选择" tabindex="-1"><a class="header-anchor" href="#编程语言的选择"><span>编程语言的选择</span></a></h2><ul><li><code>python</code> 笔者的项目采用了该语言，主要原因是方便且能快速实现（<s>以及没考虑到GIL会影响介么大</s>），并采用asyncio作为“并行”库（实际上只能并发，笔者最初以为只有两个任务，用python也足够了，<s>虽然实际上也够，但是写起来没那么舒服了</s>，可能使用threads会好一点）</li><li><code>go</code> 后续又采用go重构了一遍（<s>虽然实际效果貌似变化不大，emmm...应该是硬件/小车的原因</s>）</li></ul><p>当然采用什么编程语言并不是重要（吗？，不许用rust 😠 ）</p><h2 id="通信协议" tabindex="-1"><a class="header-anchor" href="#通信协议"><span>通信协议</span></a></h2><figure><img src="'+p+'" alt="alt text" tabindex="0" loading="lazy"><figcaption>alt text</figcaption></figure><h2 id="初步思路" tabindex="-1"><a class="header-anchor" href="#初步思路"><span>初步思路</span></a></h2><p>由于硬件限制，只有一个红外传感器用于判断底部是否为黑色， 一个红外传感器+超声波传感器用于确定前方是否有障碍，信息量非常小（<s>当然超声波传感器有大概的距离，本项目不考虑介么多，取较小距离为有障碍</s>）， 为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>i</mi><mi>n</mi><mi>R</mi><mi>o</mi><mi>a</mi><mi>d</mi><mo separator="true">,</mo><mi>h</mi><mi>a</mi><mi>v</mi><mi>e</mi><mi>O</mi><mi>b</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>c</mi><mi>l</mi><mi>e</mi><mo stretchy="false">)</mo><mo>∈</mo><msubsup><mi>Z</mi><mn>2</mn><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">(inRoad, haveObstacle) \\in Z_2^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">in</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal">o</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">ha</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mord mathnormal">b</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">e</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0622em;vertical-align:-0.2481em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-2.4519em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2481em;"><span></span></span></span></span></span></span></span></span></span>。 故而首先考虑的基本策略是偏航时左右摆头寻找<strong>正确</strong>的角度前行。</p><h2 id="遇到的问题和改进方案" tabindex="-1"><a class="header-anchor" href="#遇到的问题和改进方案"><span>遇到的问题和改进方案</span></a></h2><h3 id="小车左右轮力矩不一致" tabindex="-1"><a class="header-anchor" href="#小车左右轮力矩不一致"><span>小车左右轮力矩不一致</span></a></h3><p>由于硬件限制，若设置两个轮的速度一致的话小车直行也会偏转， 而且小车并不能知道自己“偏航”了，故而采取手动测试的方式， 通过二分左右轮的速度来得到使得小车直行的左右轮速度。并且这个关系并非简单的倍速或差量的关系。</p><p>因此无奈之下只能选取一个固定的速度来测试（比如左轮设置为0.8, 然后不断二分得到直行时右轮的速度为 0.x ）, 整个系统都在该速度下运行。</p><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>各个小车有各个的体质， 因此挑选一辆&quot;正确&quot;的小车是很重要的事情。 以及测试完小车后保护小车也是很重要的，不要找不到了或者被人踢坏了， 否则得重新找车及测速。</p></div><h3 id="小车容易冲出轨道" tabindex="-1"><a class="header-anchor" href="#小车容易冲出轨道"><span>小车容易冲出轨道</span></a></h3><p>小车还未找到合适的“姿势”就前进，导致频繁冲出赛道，耗费时间。</p><p>基于此，采取速度渐进增长的形式，使得刚回到正确姿势时速度较慢，从而不会前进太多，便于更快的回到正确的姿势。</p><h3 id="小车总是左右左摆头太蠢了" tabindex="-1"><a class="header-anchor" href="#小车总是左右左摆头太蠢了"><span>小车总是左右左摆头太蠢了</span></a></h3><p>首先采取的改进方案是先左小幅度转弯，后右大幅度转弯，最后左大幅度转弯寻找正确姿势，但效果不理想，遂放弃。</p><p>考虑到小车路线是闭合的，且局部多为凸多边形， 故而每次转弯时优先考虑上一次转弯的方向， 这样子能减少摆头次数， 多数情况转弯的方向都是对的。（<s>有一些启发式的smell</s>）</p><h3 id="其它问题" tabindex="-1"><a class="header-anchor" href="#其它问题"><span>其它问题</span></a></h3><p><s>时间有点久搞忘了，记起来再补充</s></p><h2 id="设计方案参考" tabindex="-1"><a class="header-anchor" href="#设计方案参考"><span>设计方案参考</span></a></h2><img src="https://www.plantuml.com/plantuml/svg/TP71ZeCW48RlF0Nnr1xi0tXecdZTFUwPJ81IDZgOOTYaRxy1jIfDBuRuV_xpCTuY0t4Q1m6Q0ycVQ4bCGEordm1PVeD72L4s8tWydPj3-1MSy-XA7YsdIGtpcnhiWGhK0rL1GAOmb53FPwM1JXhet0YHTMHxBHQTL2fBA7MPdbdN_m7R4ebYsLvNeKvMDXk-469LRr_j2onrmBjtYQmHnhvzznhL0tNviI_lWOwv3eXMSytaTMo35-WuBsDRrxoPWXvMjAkT4x4kT3L8am6sAZAmVTEesCW4tZsoRXs1-KsHHukiZCzttgikep_PpxU4-4JjmyK1FspLKFxXpQ99u_0F" alt=""><img src="https://www.plantuml.com/plantuml/svg/LO_FQiCm38VlVWeTMzQyG1YZaFs5dKhlHh6LriEnYoHlXstlFjo4Phb9d_MJF-r5aRMCqRY88j0XmxS1k7Cv9NAwsTQcN3mgML5KceYGMhaG-KsaOIvR6696tG67qtdDhXaVH34vcbb58LdEw5leSuuLdF6JREv5qKMQyQ-PvGwvpzen3dhJ56MilqrMCN_PDT72oLR5Voqlp-W_YkX8IQqFlF61MtWCJ4v3JZlmXR5Mjyk2J6bx8j72r4A7CM8VQLirgzRzJzEiJOsXLCPbxzNy_UdvQ00ERo-lnnfTtzOq3ykysLFoPOn_" alt=""><h2 id="和机械臂联动" tabindex="-1"><a class="header-anchor" href="#和机械臂联动"><span>和机械臂联动</span></a></h2><p>emm... 本来想让机械臂识别“货物”并放在车上托运并最后卸货的，但是小车不好运货。遂放弃，转而实验机械臂放置障碍在赛道上。</p><h2 id="结语" tabindex="-1"><a class="header-anchor" href="#结语"><span>结语</span></a></h2><p>本次智能车实验不是很愉快， 特别是重调了3，4次速度（几次换车<s>其中一次车被踩烂了</s>）</p><p>如果没有熟悉的编程语言（例如c）且不了解 多线程/协程，网络I/O的话 还是采用VPL图形化吧 <s>不过我认为报用就是了</s>。</p><p>记得给我的仓库点Star欧~</p>',34)])])}const l=s(m,[["render",r]]),c=JSON.parse('{"path":"/projects/carrobot.html","title":"北京邮电大学创新创业智能车循迹python版","lang":"en-US","frontmatter":{"date":"2024-11-07T00:00:00.000Z","title":"北京邮电大学创新创业智能车循迹python版","description":"项目源码 ，项目要求完成智能车的循迹和避障。 由于笔者不喜欢使用VPL的图形化（）, 故而使用手写代码的方式实现。","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"北京邮电大学创新创业智能车循迹python版\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-11-07T00:00:00.000Z\\",\\"dateModified\\":\\"2025-12-31T14:57:57.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"KSJ\\",\\"url\\":\\"https://github.com/King-sj\\"}]}"],["meta",{"property":"og:url","content":"https://github.com/King-sj/projects/carrobot.html"}],["meta",{"property":"og:site_name","content":"kblog"}],["meta",{"property":"og:title","content":"北京邮电大学创新创业智能车循迹python版"}],["meta",{"property":"og:description","content":"项目源码 ，项目要求完成智能车的循迹和避障。 由于笔者不喜欢使用VPL的图形化（）, 故而使用手写代码的方式实现。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-12-31T14:57:57.000Z"}],["meta",{"property":"article:published_time","content":"2024-11-07T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-12-31T14:57:57.000Z"}]]},"git":{"createdTime":1767193077000,"updatedTime":1767193077000,"contributors":[{"name":"king-sj","username":"king-sj","email":"2175616761@qq.com","commits":1,"url":"https://github.com/king-sj"}]},"readingTime":{"minutes":4.03,"words":1210},"filePathRelative":"projects/carrobot.md","excerpt":"<p><a href=\\"https://github.com/king-sj/carrobot\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">项目源码</a></p>\\n<p><s>因为想要创新学分，所以选了创新创业智能车课程</s>，项目要求完成智能车的循迹和避障。</p>\\n<p>由于笔者不喜欢使用VPL的图形化（<s>报用qWq</s>）, 故而使用手写代码的方式实现。</p>\\n","autoDesc":true}');export{l as comp,c as data};
