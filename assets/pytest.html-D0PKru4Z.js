import{_ as i,c as t,e,o as a}from"./app-B0QNlm-d.js";const n={};function p(h,s){return a(),t("div",null,[...s[0]||(s[0]=[e(`<h1 id="pytest-配置与实用技巧" tabindex="-1"><a class="header-anchor" href="#pytest-配置与实用技巧"><span>pytest 配置与实用技巧</span></a></h1><p>pytest 是 Python 生态中最流行的单元测试框架之一，支持简单易用的断言、丰富的插件生态和灵活的配置方式。</p><h2 id="基本定义" tabindex="-1"><a class="header-anchor" href="#基本定义"><span>基本定义</span></a></h2><p>pytest 是一个用于 Python 的自动化测试框架，支持单元测试、功能测试、参数化测试等。</p><h2 id="原理简介" tabindex="-1"><a class="header-anchor" href="#原理简介"><span>原理简介</span></a></h2><p>pytest 通过自动发现以 test_ 开头的函数或类，执行测试并收集结果。其断言机制无需使用 self.assert*，直接用 assert 即可。</p><h2 id="常用配置" tabindex="-1"><a class="header-anchor" href="#常用配置"><span>常用配置</span></a></h2><ul><li>conftest.py：用于存放测试夹具（fixture）、hook、全局配置等。</li><li>pytest.ini / pyproject.toml：全局配置文件，可设置测试路径、忽略规则、插件参数等。</li></ul><h3 id="conftest-py-示例" tabindex="-1"><a class="header-anchor" href="#conftest-py-示例"><span>conftest.py 示例</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-python"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># content of tests/conftest.py</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> os</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sys</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sys.path.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">append</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(os.path.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(os.path.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">dirname</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">__file__</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">), </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;..&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(sys.path)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="pytest-ini-示例" tabindex="-1"><a class="header-anchor" href="#pytest-ini-示例"><span>pytest.ini 示例</span></a></h3><div class="language-ini line-numbers-mode" data-highlighter="shiki" data-ext="ini" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-ini"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">[pytest]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">testpaths</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> tests</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">addopts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> -v --</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">tb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;">short</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">python_files</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> test_*.py</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">python_classes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> Test*</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;">python_functions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#98C379;"> test_*</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="常用命令" tabindex="-1"><a class="header-anchor" href="#常用命令"><span>常用命令</span></a></h2><ul><li>运行所有测试：<code>pytest</code></li><li>指定文件：<code>pytest tests/test_demo.py</code></li><li>只运行某个类/函数：<code>pytest -k &#39;TestClass and test_func&#39;</code></li><li>生成测试报告：<code>pytest --html=report.html</code></li></ul><h2 id="插件推荐" tabindex="-1"><a class="header-anchor" href="#插件推荐"><span>插件推荐</span></a></h2><ul><li>pytest-cov：测试覆盖率统计</li><li>pytest-xdist：并行测试</li><li>pytest-mock：mock 支持</li></ul><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h2><ul><li><a href="https://docs.pytest.org/zh/latest/" target="_blank" rel="noopener noreferrer">pytest 官方文档</a></li><li><a href="https://pytest-zh.readthedocs.io/zh/latest/example/simple.html" target="_blank" rel="noopener noreferrer">pytest 配置详解</a></li></ul>`,18)])])}const r=i(n,[["render",p]]),d=JSON.parse('{"path":"/tech/pytest.html","title":"pytest 配置与实用技巧","lang":"en-US","frontmatter":{"title":"pytest 配置与实用技巧","category":"工具","description":"pytest 配置与实用技巧 pytest 是 Python 生态中最流行的单元测试框架之一，支持简单易用的断言、丰富的插件生态和灵活的配置方式。 基本定义 pytest 是一个用于 Python 的自动化测试框架，支持单元测试、功能测试、参数化测试等。 原理简介 pytest 通过自动发现以 test_ 开头的函数或类，执行测试并收集结果。其断言机制...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"pytest 配置与实用技巧\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-12-31T15:04:47.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"KSJ\\",\\"url\\":\\"https://github.com/King-sj\\"}]}"],["meta",{"property":"og:url","content":"https://github.com/King-sj/tech/pytest.html"}],["meta",{"property":"og:site_name","content":"kblog"}],["meta",{"property":"og:title","content":"pytest 配置与实用技巧"}],["meta",{"property":"og:description","content":"pytest 配置与实用技巧 pytest 是 Python 生态中最流行的单元测试框架之一，支持简单易用的断言、丰富的插件生态和灵活的配置方式。 基本定义 pytest 是一个用于 Python 的自动化测试框架，支持单元测试、功能测试、参数化测试等。 原理简介 pytest 通过自动发现以 test_ 开头的函数或类，执行测试并收集结果。其断言机制..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-12-31T15:04:47.000Z"}],["meta",{"property":"article:modified_time","content":"2025-12-31T15:04:47.000Z"}]]},"git":{"createdTime":1767193487000,"updatedTime":1767193487000,"contributors":[{"name":"king-sj","username":"king-sj","email":"2175616761@qq.com","commits":1,"url":"https://github.com/king-sj"}]},"readingTime":{"minutes":1.02,"words":306},"filePathRelative":"tech/pytest.md","excerpt":"\\n<p>pytest 是 Python 生态中最流行的单元测试框架之一，支持简单易用的断言、丰富的插件生态和灵活的配置方式。</p>\\n<h2>基本定义</h2>\\n<p>pytest 是一个用于 Python 的自动化测试框架，支持单元测试、功能测试、参数化测试等。</p>\\n<h2>原理简介</h2>\\n<p>pytest 通过自动发现以 test_ 开头的函数或类，执行测试并收集结果。其断言机制无需使用 self.assert*，直接用 assert 即可。</p>\\n<h2>常用配置</h2>\\n<ul>\\n<li>conftest.py：用于存放测试夹具（fixture）、hook、全局配置等。</li>\\n<li>pytest.ini / pyproject.toml：全局配置文件，可设置测试路径、忽略规则、插件参数等。</li>\\n</ul>","autoDesc":true}');export{r as comp,d as data};
