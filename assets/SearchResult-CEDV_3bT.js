import{u as M,g as te,h as Ee,i as U,j as se,P as le,t as ae,k as re,l as Q,m as f,n as ie,p as Y,q as E,s as ce,R as O,v as he,x as oe,y as Be,C as ne,z as ue,A as Ae,B as me,D as ge,E as pe,F as de,G as ye,H as T,I as $,J as ve,K as P,L as Ce}from"./app-CgIfAacr.js";const De=["/","/intro.html","/essays/","/essays/%E5%91%BD%E9%87%8C%E6%9C%89%E6%97%B6%E7%BB%88%E9%A1%BB%E6%9C%89.html","/essays/%E7%A6%8F%E7%A5%B8%E7%9B%B8%E4%BE%9D.html","/miscellaneous/ZFC%E5%85%AC%E7%90%86%E9%9B%86%E5%90%88%E8%AE%BA%E7%B3%BB%E7%BB%9F.html","/miscellaneous/","/miscellaneous/%E5%BF%99%E7%A2%8C%E7%9A%84%E6%B2%B3%E7%8B%B8.html","/projects/carrobot.html","/projects/","/reading-notes/","/resources/","/tech/PostMan.html","/tech/Qt6%20Maintence%20tools%E4%B8%8D%E8%83%BD%E5%AE%89%E8%A3%85Qt5.html","/tech/android%20studio%E6%8D%A2%E6%BA%90.html","/tech/asyncio.html","/tech/autohotkey.html","/tech/cicd.html","/tech/cmake_linux_vscde.html","/tech/cors.html","/tech/docker_nginx%E9%83%A8%E7%BD%B2web%E9%A1%B9%E7%9B%AE.html","/tech/docker.html","/tech/exgcd.html","/tech/figure_bed.html","/tech/functools_wraps.html","/tech/github%20%E5%B7%A5%E4%BD%9C%E6%B5%81.html","/tech/github-ssh.html","/tech/hmm.html","/tech/","/tech/mailserver.html","/tech/modint.html","/tech/pre-commit.html","/tech/pytest.html","/tech/python_requrements.html","/tech/python%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96.html","/tech/raft.html","/tech/steam%E6%A8%A1%E7%BB%84%E5%BC%80%E5%8F%91.html","/tech/style.html","/tech/switch_true.html","/tech/tensorflow%E8%B8%A9%E5%9D%91.html","/tech/vscode%E6%8F%92%E4%BB%B6-markdown-folding.html","/tech/vsocde%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E5%B0%8F%E8%AE%B0.html","/tech/%E3%80%8C%E7%AE%97%E6%9C%AF%E5%85%AC%E7%90%86%E7%B3%BB%E7%BB%9F%201%E3%80%8D%E8%87%AA%E7%84%B6%E6%95%B0.html","/tech/%E4%BA%8C%E7%BB%B4%E5%B9%B3%E9%9D%A2%E5%88%92%E5%88%86.html","/tech/%E4%BD%BF%E7%94%A8capacitor%E5%92%8Cionic%E5%B0%86vue%E9%A1%B9%E7%9B%AE%E8%BF%81%E7%A7%BB%E5%88%B0mobile%E7%AB%AF.html","/tech/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1.html","/tech/%E5%8D%8F%E7%A8%8B(asyncio)%E5%88%B0%E5%BA%95%E9%9C%80%E4%B8%8D%E9%9C%80%E8%A6%81%E5%8A%A0%E9%94%81.html","/tech/%E5%8D%8F%E7%A8%8B.html","/tech/%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97_%E5%8D%95%E8%B0%83%E6%A0%88.html","/tech/%E5%A6%82%E4%BD%95%E5%88%B6%E4%BD%9C%E5%9C%A8%E4%B8%8D%E5%90%8C%E8%83%8C%E6%99%AF%E4%B8%8B%E6%98%BE%E7%A4%BA%E4%B8%8D%E5%90%8C%E5%86%85%E5%AE%B9%E7%9A%84%E5%9B%BE%E7%89%87.html","/tech/%E6%95%B0%E4%BB%93.html","/tech/%E6%A0%88%E5%BC%8F%E6%95%A3%E5%88%97%E7%AC%A6%E5%8F%B7%E8%A1%A8.html","/tech/%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84PPT.html","/tech/%E8%B4%AA%E5%BF%83%E6%AD%A3%E7%A1%AE%E6%80%A7.html","/tech/%E9%97%AD%E5%8C%85%E5%AE%9E%E7%8E%B0%E7%B1%BB.html","/tutorials/","/tutorials/typora%E6%BF%80%E6%B4%BB.html","/reading-notes/%E6%9E%B6%E6%9E%84%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93/","/reading-notes/%E6%9E%B6%E6%9E%84%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93/%E5%BA%8F.html","/resources/compile/","/resources/html2md/","/resources/music/","/resources/vscode/","/tech/DesignPatterns/DesignPrinciples.html","/tech/DesignPatterns/abstractFactory.html","/tech/DesignPatterns/adapter.html","/tech/DesignPatterns/bridge.html","/tech/DesignPatterns/builder.html","/tech/DesignPatterns/chainOfResponsibility.html","/tech/DesignPatterns/command.html","/tech/DesignPatterns/composite.html","/tech/DesignPatterns/decorator.html","/tech/DesignPatterns/end.html","/tech/DesignPatterns/facade.html","/tech/DesignPatterns/factory_method.html","/tech/DesignPatterns/flyweight.html","/tech/DesignPatterns/","/tech/DesignPatterns/interpreter.html","/tech/DesignPatterns/iterator.html","/tech/DesignPatterns/mediator.html","/tech/DesignPatterns/memento.html","/tech/DesignPatterns/observer.html","/tech/DesignPatterns/prototype.html","/tech/DesignPatterns/proxy.html","/tech/DesignPatterns/singleton.html","/tech/DesignPatterns/state.html","/tech/DesignPatterns/strategy.html","/tech/DesignPatterns/template_method.html","/tech/DesignPatterns/visitor.html","/tech/designASimpileCCompiler/0.html","/tech/designASimpileCCompiler/1.html","/tech/designASimpileCCompiler/2.html","/tech/designASimpileCCompiler/3.html","/tech/designASimpileCCompiler/4.html","/tech/designASimpileCCompiler/5.html","/tech/designASimpileCCompiler/6.html","/tech/designASimpileCCompiler/7.html","/tech/designASimpileCCompiler/8.html","/tech/designASimpileCCompiler/9.html","/tech/%E5%AE%89%E5%85%A8/csrf.html","/tech/%E5%AE%89%E5%85%A8/","/tech/%E5%AE%89%E5%85%A8/xss.html","/tech/%E6%9E%B6%E6%9E%84%E5%B8%88/","/tech/%E6%9E%B6%E6%9E%84%E5%B8%88/mysql.html","/tech/%E6%9E%B6%E6%9E%84%E5%B8%88/%E5%80%92%E6%8E%92%E7%B4%A2%E5%BC%95.html","/tech/%E6%9E%B6%E6%9E%84%E5%B8%88/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1.html","/tech/%E6%9E%B6%E6%9E%84%E5%B8%88/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8.html","/tutorials/math/Lipschitz.html","/tutorials/math/","/tutorials/math/%E5%82%85%E9%87%8C%E5%8F%B6%E7%BA%A7%E6%95%B0%E5%92%8C%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2.html","/tutorials/math/%E5%BE%AE%E5%88%86%E6%96%B9%E7%A8%8B.html","/tutorials/math/%E6%9E%81%E7%82%B9%E6%9E%81%E7%BA%BF.html","/tutorials/math/%E6%A8%A1%E5%BD%A2%E5%BC%8F.html","/tutorials/math/%E7%95%99%E6%95%B0.html","/tutorials/math/%E7%AC%AC%E5%8D%81%E4%BA%94%E5%B1%8A%E5%A4%A7%E5%AD%A6%E7%94%9F%E6%95%B0%E5%AD%A6%E7%AB%9E%E8%B5%9B%E7%AC%AC%E5%85%AD%E9%A2%98.html","/tutorials/math/%E8%8C%83%E6%95%B0.html","/tutorials/music/","/tutorials/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/LR.html","/tech/%E5%9B%BE%E5%BD%A2%E5%AD%A6/%E6%B8%B2%E6%9F%93/smallpt.html","/tutorials/oi/nowcoder/","/tutorials/oi/nowcoder/reserve_list.html","/tutorials/oi/self/","/tutorials/oi/self/r1c0.html","/404.html","/tech/designASimpileCCompiler/","/tutorials/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/","/tech/%E5%9B%BE%E5%BD%A2%E5%AD%A6/%E6%B8%B2%E6%9F%93/","/tech/%E5%9B%BE%E5%BD%A2%E5%AD%A6/","/tutorials/oi/","/category/","/category/%E6%95%B0%E5%AD%A6/","/category/%E9%9A%8F%E7%AC%94/","/category/%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95/","/category/build-tools/","/category/%E8%87%AA%E5%8A%A8%E5%8C%96/","/category/cicd/","/category/c__/","/category/%E5%89%8D%E7%AB%AF/","/category/nginx/","/category/docker/","/category/git/","/category/oi/","/category/%E5%B7%A5%E5%85%B7/","/category/python/","/category/%E9%A3%8E%E6%A0%BC/","/category/%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F/","/category/%E6%9E%B6%E6%9E%84/","/category/%E7%AE%97%E6%B3%95/","/category/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/","/category/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/","/category/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/","/category/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","/category/%E5%AE%89%E5%85%A8/","/category/%E6%9E%B6%E6%9E%84%E5%B8%88/","/category/%E6%A3%80%E7%B4%A2%E7%B3%BB%E7%BB%9F/","/tag/","/tag/cicd/","/tag/%E9%83%A8%E7%BD%B2/","/tag/docker/","/tag/modint/","/tag/%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/","/tag/%E9%A3%8E%E6%A0%BC/","/tag/%E5%85%AC%E7%90%86%E7%B3%BB%E7%BB%9F/","/tag/mobile/","/tag/%E6%BF%80%E6%B4%BB/","/tag/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","/tag/typescript/","/tag/%E7%94%9F%E6%88%90%E5%AE%9E%E4%BE%8B/","/tag/%E5%88%86%E5%BC%80%E8%80%83%E8%99%91/","/tag/%E6%8E%A8%E5%8D%B8%E8%B4%A3%E4%BB%BB/","/tag/%E7%94%A8%E7%B1%BB%E5%AE%9E%E7%8E%B0/","/tag/%E5%AE%B9%E5%99%A8%E4%B8%8E%E5%86%85%E5%AE%B9%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7/","/tag/%E7%AE%80%E5%8D%95%E5%8C%96/","/tag/%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95/","/tag/%E4%BA%A4%E7%BB%99%E5%AD%90%E7%B1%BB/","/tag/%E9%81%BF%E5%85%8D%E6%B5%AA%E8%B4%B9/","/tag/%E7%AE%A1%E7%90%86%E7%8A%B6%E6%80%81/","/tag/%E6%95%B4%E4%BD%93%E7%9A%84%E6%9B%BF%E6%8D%A2%E7%AE%97%E6%B3%95/","/tag/%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%B9%B6%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE/","/tag/c/","/tag/%E7%BC%96%E8%AF%91%E5%99%A8/","/tag/%E8%A7%A3%E9%87%8A%E5%99%A8/","/article/","/star/","/timeline/"],Fe="SEARCH_PRO_QUERY_HISTORY",p=M(Fe,[]),fe=()=>{const{queryHistoryCount:s}=P,l=s>0;return{enabled:l,queryHistory:p,addQueryHistory:a=>{l&&(p.value=Array.from(new Set([a,...p.value.slice(0,s-1)])))},removeQueryHistory:a=>{p.value=[...p.value.slice(0,a),...p.value.slice(a+1)]}}},_=s=>De[s.id]+("anchor"in s?`#${s.anchor}`:""),Pe="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:I}=P,d=M(Pe,[]),ke=()=>{const s=I>0;return{enabled:s,resultHistory:d,addResultHistory:l=>{if(s){const a={link:_(l),display:l.display};"header"in l&&(a.header=l.header),d.value=[a,...d.value.slice(0,I-1)]}},removeResultHistory:l=>{d.value=[...d.value.slice(0,l),...d.value.slice(l+1)]}}},He=s=>{const l=ne(),a=U(),k=ue(),i=Q(0),C=f(()=>i.value>0),A=Ae([]);return me(()=>{const{search:m,terminate:H}=ge(),y=ve(o=>{const v=o.join(" "),{searchFilter:w=u=>u,splitWord:R,suggestionsFilter:q,...g}=l.value;v?(i.value+=1,m(o.join(" "),a.value,g).then(u=>w(u,v,a.value,k.value)).then(u=>{i.value-=1,A.value=u}).catch(u=>{console.warn(u),i.value-=1,i.value||(A.value=[])})):A.value=[]},P.searchDelay-P.suggestDelay);Y([s,a],([o])=>y(o),{immediate:!0}),pe(()=>{H()})}),{isSearching:C,results:A}};var Re=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(s,{emit:l}){const a=Ee(),k=U(),i=se(le),{enabled:C,addQueryHistory:A,queryHistory:m,removeQueryHistory:H}=fe(),{enabled:y,resultHistory:o,addResultHistory:v,removeResultHistory:w}=ke(),R=C||y,q=ae(s,"queries"),{results:g,isSearching:u}=He(q),r=re({isQuery:!0,index:0}),B=Q(0),n=Q(0),L=f(()=>R&&(m.value.length>0||o.value.length>0)),S=f(()=>g.value.length>0),b=f(()=>g.value[B.value]||null),z=()=>{const{isQuery:e,index:t}=r;t===0?(r.isQuery=!e,r.index=e?o.value.length-1:m.value.length-1):r.index=t-1},G=()=>{const{isQuery:e,index:t}=r;t===(e?m.value.length-1:o.value.length-1)?(r.isQuery=!e,r.index=0):r.index=t+1},J=()=>{B.value=B.value>0?B.value-1:g.value.length-1,n.value=b.value.contents.length-1},K=()=>{B.value=B.value<g.value.length-1?B.value+1:0,n.value=0},V=()=>{n.value<b.value.contents.length-1?n.value+=1:K()},Z=()=>{n.value>0?n.value-=1:J()},x=e=>e.map(t=>Ce(t)?t:E(t[0],t[1])),N=e=>{if(e.type==="customField"){const t=de[e.index]||"$content",[c,F=""]=ye(t)?t[k.value].split("$content"):t.split("$content");return e.display.map(h=>E("div",x([c,...h,F])))}return e.display.map(t=>E("div",x(t)))},D=()=>{B.value=0,n.value=0,l("updateQuery",""),l("close")},W=()=>C?E("ul",{class:"search-pro-result-list"},E("li",{class:"search-pro-result-list-item"},[E("div",{class:"search-pro-result-title"},i.value.queryHistory),m.value.map((e,t)=>E("div",{class:["search-pro-result-item",{active:r.isQuery&&r.index===t}],onClick:()=>{l("updateQuery",e)}},[E(T,{class:"search-pro-result-type"}),E("div",{class:"search-pro-result-content"},e),E("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:c=>{c.preventDefault(),c.stopPropagation(),H(t)}})]))])):null,X=()=>y?E("ul",{class:"search-pro-result-list"},E("li",{class:"search-pro-result-list-item"},[E("div",{class:"search-pro-result-title"},i.value.resultHistory),o.value.map((e,t)=>E(O,{to:e.link,class:["search-pro-result-item",{active:!r.isQuery&&r.index===t}],onClick:()=>{D()}},()=>[E(T,{class:"search-pro-result-type"}),E("div",{class:"search-pro-result-content"},[e.header?E("div",{class:"content-header"},e.header):null,E("div",e.display.map(c=>x(c)).flat())]),E("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:c=>{c.preventDefault(),c.stopPropagation(),w(t)}})]))])):null;return ie("keydown",e=>{if(s.isFocusing){if(S.value){if(e.key==="ArrowUp")Z();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const t=b.value.contents[n.value];A(s.queries.join(" ")),v(t),a.push(_(t)),D()}}else if(y){if(e.key==="ArrowUp")z();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:t}=r;r.isQuery?(l("updateQuery",m.value[t]),e.preventDefault()):(a.push(o.value[t].link),D())}}}}),Y([B,n],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>E("div",{class:["search-pro-result-wrapper",{empty:s.queries.length?!S.value:!L.value}],id:"search-pro-results"},s.queries.length?u.value?E(ce,{hint:i.value.searching}):S.value?E("ul",{class:"search-pro-result-list"},g.value.map(({title:e,contents:t},c)=>{const F=B.value===c;return E("li",{class:["search-pro-result-list-item",{active:F}]},[E("div",{class:"search-pro-result-title"},e||i.value.defaultTitle),t.map((h,ee)=>{const j=F&&n.value===ee;return E(O,{to:_(h),class:["search-pro-result-item",{active:j,"aria-selected":j}],onClick:()=>{A(s.queries.join(" ")),v(h),D()}},()=>[h.type==="text"?null:E(h.type==="title"?he:h.type==="heading"?oe:Be,{class:"search-pro-result-type"}),E("div",{class:"search-pro-result-content"},[h.type==="text"&&h.header?E("div",{class:"content-header"},h.header):null,E("div",N(h))])])})])})):i.value.emptyResult:R?L.value?[W(),X()]:i.value.emptyHistory:i.value.emptyResult)}});export{Re as default};
