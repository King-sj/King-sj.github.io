import{u as U,g as te,h as le,i as M,j as se,P as ae,t as ie,k as re,l as b,m as S,n as ue,p as Y,q as l,s as oe,R as O,v as ce,x as ne,y as he,C as ve,z as pe,A as Ee,B as de,D as me,E as ye,F as Ae,G as Be,H as _,I as $,J as ge,K as k,L as Ce}from"./app-DlGMjcXX.js";const fe=["/","/intro.html","/essays/","/projects/","/resources/","/tech/Qt6%20Maintence%20tools%E4%B8%8D%E8%83%BD%E5%AE%89%E8%A3%85Qt5.html","/tech/android%20studio%E6%8D%A2%E6%BA%90.html","/tech/cicd.html","/tech/docker_nginx%E9%83%A8%E7%BD%B2web%E9%A1%B9%E7%9B%AE.html","/tech/docker.html","/tech/github%20%E5%B7%A5%E4%BD%9C%E6%B5%81.html","/tech/","/tech/modint.html","/tech/steam%E6%A8%A1%E7%BB%84%E5%BC%80%E5%8F%91.html","/tech/style.html","/tech/vsocde%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E5%B0%8F%E8%AE%B0.html","/tech/%E3%80%8C%E7%AE%97%E6%9C%AF%E5%85%AC%E7%90%86%E7%B3%BB%E7%BB%9F%201%E3%80%8D%E8%87%AA%E7%84%B6%E6%95%B0.html","/tech/%E4%BD%BF%E7%94%A8capacitor%E5%92%8Cionic%E5%B0%86vue%E9%A1%B9%E7%9B%AE%E8%BF%81%E7%A7%BB%E5%88%B0mobile%E7%AB%AF.html","/tech/%E5%8D%8F%E7%A8%8B(asyncio)%E5%88%B0%E5%BA%95%E9%9C%80%E4%B8%8D%E9%9C%80%E8%A6%81%E5%8A%A0%E9%94%81.html","/tech/%E5%8D%8F%E7%A8%8B.html","/tech/%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84PPT.html","/tech/%E9%97%AD%E5%8C%85%E5%AE%9E%E7%8E%B0%E7%B1%BB.html","/tutorials/","/tech/designASimpileCCompiler/0.html","/tech/designASimpileCCompiler/1.html","/tech/designASimpileCCompiler/2.html","/tech/designASimpileCCompiler/3.html","/tech/designASimpileCCompiler/4.html","/tech/designASimpileCCompiler/5.html","/tech/designASimpileCCompiler/6.html","/tech/designASimpileCCompiler/7.html","/tech/designASimpileCCompiler/8.html","/tech/designASimpileCCompiler/9.html","/404.html","/tech/designASimpileCCompiler/","/category/","/category/build-tools/","/category/cicd/","/category/nginx/","/category/%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7/","/category/docker/","/category/oi/","/category/%E9%A3%8E%E6%A0%BC/","/category/%E6%95%B0%E5%AD%A6/","/tag/","/tag/cicd/","/tag/%E9%83%A8%E7%BD%B2/","/tag/docker/","/tag/modint/","/tag/%E9%A3%8E%E6%A0%BC/","/tag/%E5%85%AC%E7%90%86%E7%B3%BB%E7%BB%9F/","/tag/mobile/","/article/","/star/","/timeline/"],He="SEARCH_PRO_QUERY_HISTORY",y=U(He,[]),Se=()=>{const{queryHistoryCount:s}=k,a=s>0;return{enabled:a,queryHistory:y,addQueryHistory:i=>{a&&(y.value=Array.from(new Set([i,...y.value.slice(0,s-1)])))},removeQueryHistory:i=>{y.value=[...y.value.slice(0,i),...y.value.slice(i+1)]}}},L=s=>fe[s.id]+("anchor"in s?`#${s.anchor}`:""),ke="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:I}=k,A=U(ke,[]),De=()=>{const s=I>0;return{enabled:s,resultHistory:A,addResultHistory:a=>{if(s){const i={link:L(a),display:a.display};"header"in a&&(i.header=a.header),A.value=[i,...A.value.slice(0,I-1)]}},removeResultHistory:a=>{A.value=[...A.value.slice(0,a),...A.value.slice(a+1)]}}},Re=s=>{const a=ve(),i=M(),D=pe(),u=b(0),C=S(()=>u.value>0),E=Ee([]);return de(()=>{const{search:d,terminate:R}=me(),B=ge(n=>{const g=n.join(" "),{searchFilter:F=p=>p,splitWord:Q,suggestionsFilter:P,...m}=a.value;g?(u.value+=1,d(n.join(" "),i.value,m).then(p=>F(p,g,i.value,D.value)).then(p=>{u.value-=1,E.value=p}).catch(p=>{console.warn(p),u.value-=1,u.value||(E.value=[])})):E.value=[]},k.searchDelay-k.suggestDelay);Y([s,i],([n])=>B(n),{immediate:!0}),ye(()=>{R()})}),{isSearching:C,results:E}};var Qe=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(s,{emit:a}){const i=le(),D=M(),u=se(ae),{enabled:C,addQueryHistory:E,queryHistory:d,removeQueryHistory:R}=Se(),{enabled:B,resultHistory:n,addResultHistory:g,removeResultHistory:F}=De(),Q=C||B,P=ie(s,"queries"),{results:m,isSearching:p}=Re(P),r=re({isQuery:!0,index:0}),h=b(0),v=b(0),T=S(()=>Q&&(d.value.length>0||n.value.length>0)),w=S(()=>m.value.length>0),x=S(()=>m.value[h.value]||null),z=()=>{const{isQuery:e,index:t}=r;t===0?(r.isQuery=!e,r.index=e?n.value.length-1:d.value.length-1):r.index=t-1},G=()=>{const{isQuery:e,index:t}=r;t===(e?d.value.length-1:n.value.length-1)?(r.isQuery=!e,r.index=0):r.index=t+1},J=()=>{h.value=h.value>0?h.value-1:m.value.length-1,v.value=x.value.contents.length-1},K=()=>{h.value=h.value<m.value.length-1?h.value+1:0,v.value=0},V=()=>{v.value<x.value.contents.length-1?v.value+=1:K()},N=()=>{v.value>0?v.value-=1:J()},q=e=>e.map(t=>Ce(t)?t:l(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=Ae[e.index]||"$content",[o,H=""]=Be(t)?t[D.value].split("$content"):t.split("$content");return e.display.map(c=>l("div",q([o,...c,H])))}return e.display.map(t=>l("div",q(t)))},f=()=>{h.value=0,v.value=0,a("updateQuery",""),a("close")},X=()=>C?l("ul",{class:"search-pro-result-list"},l("li",{class:"search-pro-result-list-item"},[l("div",{class:"search-pro-result-title"},u.value.queryHistory),d.value.map((e,t)=>l("div",{class:["search-pro-result-item",{active:r.isQuery&&r.index===t}],onClick:()=>{a("updateQuery",e)}},[l(_,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},e),l("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:o=>{o.preventDefault(),o.stopPropagation(),R(t)}})]))])):null,Z=()=>B?l("ul",{class:"search-pro-result-list"},l("li",{class:"search-pro-result-list-item"},[l("div",{class:"search-pro-result-title"},u.value.resultHistory),n.value.map((e,t)=>l(O,{to:e.link,class:["search-pro-result-item",{active:!r.isQuery&&r.index===t}],onClick:()=>{f()}},()=>[l(_,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},[e.header?l("div",{class:"content-header"},e.header):null,l("div",e.display.map(o=>q(o)).flat())]),l("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:o=>{o.preventDefault(),o.stopPropagation(),F(t)}})]))])):null;return ue("keydown",e=>{if(s.isFocusing){if(w.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const t=x.value.contents[v.value];E(s.queries.join(" ")),g(t),i.push(L(t)),f()}}else if(B){if(e.key==="ArrowUp")z();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:t}=r;r.isQuery?(a("updateQuery",d.value[t]),e.preventDefault()):(i.push(n.value[t].link),f())}}}}),Y([h,v],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>l("div",{class:["search-pro-result-wrapper",{empty:s.queries.length?!w.value:!T.value}],id:"search-pro-results"},s.queries.length?p.value?l(oe,{hint:u.value.searching}):w.value?l("ul",{class:"search-pro-result-list"},m.value.map(({title:e,contents:t},o)=>{const H=h.value===o;return l("li",{class:["search-pro-result-list-item",{active:H}]},[l("div",{class:"search-pro-result-title"},e||u.value.defaultTitle),t.map((c,ee)=>{const j=H&&v.value===ee;return l(O,{to:L(c),class:["search-pro-result-item",{active:j,"aria-selected":j}],onClick:()=>{E(s.queries.join(" ")),g(c),f()}},()=>[c.type==="text"?null:l(c.type==="title"?ce:c.type==="heading"?ne:he,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},[c.type==="text"&&c.header?l("div",{class:"content-header"},c.header):null,l("div",W(c))])])})])})):u.value.emptyResult:Q?T.value?[X(),Z()]:u.value.emptyHistory:u.value.emptyResult)}});export{Qe as default};
