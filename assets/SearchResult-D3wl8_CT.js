import{u as U,g as te,h as se,i as M,j as ae,P as le,t as re,k as ie,l as x,m as P,n as ne,p as Y,q as s,s as ce,R as T,v as oe,x as Ee,y as ue,C as he,z as me,A as Be,B as pe,D as ge,E as ve,F as Ae,G as de,H as j,I as $,J as ye,K as f,L as De}from"./app-QS-Tdy5k.js";const Ce=["/","/intro.html","/essays/","/projects/","/resources/","/tech/Qt6%20Maintence%20tools%E4%B8%8D%E8%83%BD%E5%AE%89%E8%A3%85Qt5.html","/tech/android%20studio%E6%8D%A2%E6%BA%90.html","/tech/cicd.html","/tech/docker_nginx%E9%83%A8%E7%BD%B2web%E9%A1%B9%E7%9B%AE.html","/tech/docker.html","/tech/github%20%E5%B7%A5%E4%BD%9C%E6%B5%81.html","/tech/","/tech/modint.html","/tech/python_requrements.html","/tech/steam%E6%A8%A1%E7%BB%84%E5%BC%80%E5%8F%91.html","/tech/style.html","/tech/vsocde%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E5%B0%8F%E8%AE%B0.html","/tech/%E3%80%8C%E7%AE%97%E6%9C%AF%E5%85%AC%E7%90%86%E7%B3%BB%E7%BB%9F%201%E3%80%8D%E8%87%AA%E7%84%B6%E6%95%B0.html","/tech/%E4%BD%BF%E7%94%A8capacitor%E5%92%8Cionic%E5%B0%86vue%E9%A1%B9%E7%9B%AE%E8%BF%81%E7%A7%BB%E5%88%B0mobile%E7%AB%AF.html","/tech/%E5%8D%8F%E7%A8%8B(asyncio)%E5%88%B0%E5%BA%95%E9%9C%80%E4%B8%8D%E9%9C%80%E8%A6%81%E5%8A%A0%E9%94%81.html","/tech/%E5%8D%8F%E7%A8%8B.html","/tech/%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84PPT.html","/tech/%E9%97%AD%E5%8C%85%E5%AE%9E%E7%8E%B0%E7%B1%BB.html","/tutorials/","/tutorials/typora%E6%BF%80%E6%B4%BB.html","/resources/html2md/","/tech/DesignPatterns/DesignPrinciples.html","/tech/DesignPatterns/abstractFactory.html","/tech/DesignPatterns/adapter.html","/tech/DesignPatterns/bridge.html","/tech/DesignPatterns/builder.html","/tech/DesignPatterns/chainOfResponsibility.html","/tech/DesignPatterns/composite.html","/tech/DesignPatterns/decorator.html","/tech/DesignPatterns/facade.html","/tech/DesignPatterns/factory_method.html","/tech/DesignPatterns/flyweight.html","/tech/DesignPatterns/","/tech/DesignPatterns/iterator.html","/tech/DesignPatterns/mediator.html","/tech/DesignPatterns/memento.html","/tech/DesignPatterns/observer.html","/tech/DesignPatterns/prototype.html","/tech/DesignPatterns/singleton.html","/tech/DesignPatterns/state.html","/tech/DesignPatterns/strategy.html","/tech/DesignPatterns/template_method.html","/tech/DesignPatterns/visitor.html","/tech/designASimpileCCompiler/0.html","/tech/designASimpileCCompiler/1.html","/tech/designASimpileCCompiler/2.html","/tech/designASimpileCCompiler/3.html","/tech/designASimpileCCompiler/4.html","/tech/designASimpileCCompiler/5.html","/tech/designASimpileCCompiler/6.html","/tech/designASimpileCCompiler/7.html","/tech/designASimpileCCompiler/8.html","/tech/designASimpileCCompiler/9.html","/404.html","/tech/designASimpileCCompiler/","/category/","/category/build-tools/","/category/cicd/","/category/nginx/","/category/%E5%A5%87%E6%8A%80%E6%B7%AB%E5%B7%A7/","/category/docker/","/category/oi/","/category/python/","/category/%E9%A3%8E%E6%A0%BC/","/category/%E6%95%B0%E5%AD%A6/","/category/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","/category/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/","/tag/","/tag/cicd/","/tag/%E9%83%A8%E7%BD%B2/","/tag/docker/","/tag/modint/","/tag/%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/","/tag/%E9%A3%8E%E6%A0%BC/","/tag/%E5%85%AC%E7%90%86%E7%B3%BB%E7%BB%9F/","/tag/mobile/","/tag/%E6%BF%80%E6%B4%BB/","/tag/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","/tag/typescript/","/tag/%E7%94%9F%E6%88%90%E5%AE%9E%E4%BE%8B/","/tag/%E5%88%86%E5%BC%80%E8%80%83%E8%99%91/","/tag/%E6%8E%A8%E5%8D%B8%E8%B4%A3%E4%BB%BB/","/tag/%E5%AE%B9%E5%99%A8%E4%B8%8E%E5%86%85%E5%AE%B9%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7/","/tag/%E7%AE%80%E5%8D%95%E5%8C%96/","/tag/%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95/","/tag/%E4%BA%A4%E7%BB%99%E5%AD%90%E7%B1%BB/","/tag/%E9%81%BF%E5%85%8D%E6%B5%AA%E8%B4%B9/","/tag/%E7%AE%A1%E7%90%86%E7%8A%B6%E6%80%81/","/tag/%E6%95%B4%E4%BD%93%E7%9A%84%E6%9B%BF%E6%8D%A2%E7%AE%97%E6%B3%95/","/tag/%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%B9%B6%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE/","/tag/c/","/tag/%E7%BC%96%E8%AF%91%E5%99%A8/","/tag/%E8%A7%A3%E9%87%8A%E5%99%A8/","/article/","/star/","/timeline/"],Fe="SEARCH_PRO_QUERY_HISTORY",v=U(Fe,[]),Pe=()=>{const{queryHistoryCount:a}=f,l=a>0;return{enabled:l,queryHistory:v,addQueryHistory:r=>{l&&(v.value=Array.from(new Set([r,...v.value.slice(0,a-1)])))},removeQueryHistory:r=>{v.value=[...v.value.slice(0,r),...v.value.slice(r+1)]}}},q=a=>Ce[a.id]+("anchor"in a?`#${a.anchor}`:""),fe="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:I}=f,A=U(fe,[]),He=()=>{const a=I>0;return{enabled:a,resultHistory:A,addResultHistory:l=>{if(a){const r={link:q(l),display:l.display};"header"in l&&(r.header=l.header),A.value=[r,...A.value.slice(0,I-1)]}},removeResultHistory:l=>{A.value=[...A.value.slice(0,l),...A.value.slice(l+1)]}}},Se=a=>{const l=he(),r=M(),H=me(),n=x(0),D=P(()=>n.value>0),B=Be([]);return pe(()=>{const{search:p,terminate:S}=ge(),d=ye(E=>{const y=E.join(" "),{searchFilter:k=m=>m,splitWord:R,suggestionsFilter:L,...g}=l.value;y?(n.value+=1,p(E.join(" "),r.value,g).then(m=>k(m,y,r.value,H.value)).then(m=>{n.value-=1,B.value=m}).catch(m=>{console.warn(m),n.value-=1,n.value||(B.value=[])})):B.value=[]},f.searchDelay-f.suggestDelay);Y([a,r],([E])=>d(E),{immediate:!0}),ve(()=>{S()})}),{isSearching:D,results:B}};var Re=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:l}){const r=se(),H=M(),n=ae(le),{enabled:D,addQueryHistory:B,queryHistory:p,removeQueryHistory:S}=Pe(),{enabled:d,resultHistory:E,addResultHistory:y,removeResultHistory:k}=He(),R=D||d,L=re(a,"queries"),{results:g,isSearching:m}=Se(L),i=ie({isQuery:!0,index:0}),u=x(0),h=x(0),_=P(()=>R&&(p.value.length>0||E.value.length>0)),Q=P(()=>g.value.length>0),b=P(()=>g.value[u.value]||null),z=()=>{const{isQuery:e,index:t}=i;t===0?(i.isQuery=!e,i.index=e?E.value.length-1:p.value.length-1):i.index=t-1},G=()=>{const{isQuery:e,index:t}=i;t===(e?p.value.length-1:E.value.length-1)?(i.isQuery=!e,i.index=0):i.index=t+1},J=()=>{u.value=u.value>0?u.value-1:g.value.length-1,h.value=b.value.contents.length-1},K=()=>{u.value=u.value<g.value.length-1?u.value+1:0,h.value=0},V=()=>{h.value<b.value.contents.length-1?h.value+=1:K()},N=()=>{h.value>0?h.value-=1:J()},w=e=>e.map(t=>De(t)?t:s(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=Ae[e.index]||"$content",[c,F=""]=de(t)?t[H.value].split("$content"):t.split("$content");return e.display.map(o=>s("div",w([c,...o,F])))}return e.display.map(t=>s("div",w(t)))},C=()=>{u.value=0,h.value=0,l("updateQuery",""),l("close")},X=()=>D?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},n.value.queryHistory),p.value.map((e,t)=>s("div",{class:["search-pro-result-item",{active:i.isQuery&&i.index===t}],onClick:()=>{l("updateQuery",e)}},[s(j,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},e),s("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:c=>{c.preventDefault(),c.stopPropagation(),S(t)}})]))])):null,Z=()=>d?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},n.value.resultHistory),E.value.map((e,t)=>s(T,{to:e.link,class:["search-pro-result-item",{active:!i.isQuery&&i.index===t}],onClick:()=>{C()}},()=>[s(j,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[e.header?s("div",{class:"content-header"},e.header):null,s("div",e.display.map(c=>w(c)).flat())]),s("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:c=>{c.preventDefault(),c.stopPropagation(),k(t)}})]))])):null;return ne("keydown",e=>{if(a.isFocusing){if(Q.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const t=b.value.contents[h.value];B(a.queries.join(" ")),y(t),r.push(q(t)),C()}}else if(d){if(e.key==="ArrowUp")z();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:t}=i;i.isQuery?(l("updateQuery",p.value[t]),e.preventDefault()):(r.push(E.value[t].link),C())}}}}),Y([u,h],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>s("div",{class:["search-pro-result-wrapper",{empty:a.queries.length?!Q.value:!_.value}],id:"search-pro-results"},a.queries.length?m.value?s(ce,{hint:n.value.searching}):Q.value?s("ul",{class:"search-pro-result-list"},g.value.map(({title:e,contents:t},c)=>{const F=u.value===c;return s("li",{class:["search-pro-result-list-item",{active:F}]},[s("div",{class:"search-pro-result-title"},e||n.value.defaultTitle),t.map((o,ee)=>{const O=F&&h.value===ee;return s(T,{to:q(o),class:["search-pro-result-item",{active:O,"aria-selected":O}],onClick:()=>{B(a.queries.join(" ")),y(o),C()}},()=>[o.type==="text"?null:s(o.type==="title"?oe:o.type==="heading"?Ee:ue,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[o.type==="text"&&o.header?s("div",{class:"content-header"},o.header):null,s("div",W(o))])])})])})):n.value.emptyResult:R?_.value?[X(),Z()]:n.value.emptyHistory:n.value.emptyResult)}});export{Re as default};
