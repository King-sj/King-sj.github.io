import{m as M,K as O,a as Ae,k as De,C as we,X as C,w as f,Y as m,I as be,b as k,c as b,x as me,L as ye,d as Y,v as Ke,e as R,U as We,j as xe,G as Xe,T as He,f as Je,g as Qe}from"./graph-80608c14-BoSRGlfJ.js";import{n as ke,ab as Ue,ac as Ze,x as H,p as Ee,ad as $,a9 as Oe,a2 as er,r as S,ae as W,y as J,w as rr,af as tr,$ as nr,a5 as Ne,l as or,a8 as ir}from"./mermaid.esm.min-BlEn3C5I.js";var ur=/\s/;function ar(e){for(var r=e.length;r--&&ur.test(e.charAt(r)););return r}var cr=/^\s+/;function dr(e){return e&&e.slice(0,ar(e)+1).replace(cr,"")}var ie=NaN,fr=/^[-+]0x[0-9a-f]+$/i,sr=/^0b[01]+$/i,hr=/^0o[0-7]+$/i,vr=parseInt;function gr(e){if(typeof e=="number")return e;if(C(e))return ie;if(S(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=S(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=dr(e);var t=sr.test(e);return t||hr.test(e)?vr(e.slice(2),t?2:8):fr.test(e)?ie:+e}var ue=1/0,lr=17976931348623157e292;function T(e){if(!e)return e===0?e:0;if(e=gr(e),e===ue||e===-ue){var r=e<0?-1:1;return r*lr}return e===e?e:0}function pr(e){var r=T(e),t=r%1;return r===r?t?r-t:r:0}function N(e){var r=e==null?0:e.length;return r?we(e):[]}function wr(e){return Ue(Ze(e,void 0,N),e+"")}var br=1,mr=4;function yr(e){return We(e,br|mr)}var _e=Object.prototype,xr=_e.hasOwnProperty,kr=ke(function(e,r){e=Object(e);var t=-1,n=r.length,o=n>2?r[2]:void 0;for(o&&$(r[0],r[1],o)&&(n=1);++t<n;)for(var u=r[t],i=Oe(u),a=-1,c=i.length;++a<c;){var d=i[a],s=e[d];(s===void 0||er(s,_e[d])&&!xr.call(e,d))&&(e[d]=u[d])}return e});const Er=kr;function G(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}function Or(e){return function(r,t,n){var o=Object(r);if(!Ee(r)){var u=O(t);r=He(r),t=function(a){return u(o[a],a,o)}}var i=e(r,t,n);return i>-1?o[u?r[i]:i]:void 0}}var Nr=Math.max;function _r(e,r,t){var n=e==null?0:e.length;if(!n)return-1;var o=t==null?0:pr(t);return o<0&&(o=Nr(n+o,0)),Qe(e,O(r),o)}var Ir=Or(_r);const Q=Ir;function Ie(e,r){var t=-1,n=Ee(e)?Array(e.length):[];return De(e,function(o,u,i){n[++t]=r(o,u,i)}),n}function p(e,r){var t=H(e)?M:Ie;return t(e,O(r))}function Pr(e,r){return e==null?e:ir(e,xe(r),Oe)}function jr(e,r){return e&&me(e,xe(r))}function Rr(e,r){return e>r}var Lr=Object.prototype,Mr=Lr.hasOwnProperty;function Tr(e,r){return e!=null&&Mr.call(e,r)}function Pe(e,r){return e!=null&&Ke(e,r,Tr)}function je(e,r){return e<r}function F(e,r){var t={};return r=O(r),me(e,function(n,o,u){tr(t,o,r(n,o,u))}),t}function U(e,r,t){for(var n=-1,o=e.length;++n<o;){var u=e[n],i=r(u);if(i!=null&&(a===void 0?i===i&&!C(i):t(i,a)))var a=i,c=u}return c}function y(e){return e&&e.length?U(e,J,Rr):void 0}function P(e){return e&&e.length?U(e,J,je):void 0}function Z(e,r){return e&&e.length?U(e,O(r),je):void 0}function Cr(e,r,t,n){if(!S(e))return e;r=ye(r,e);for(var o=-1,u=r.length,i=u-1,a=e;a!=null&&++o<u;){var c=Xe(r[o]),d=t;if(c==="__proto__"||c==="constructor"||c==="prototype")return e;if(o!=i){var s=a[c];d=void 0,d===void 0&&(d=S(s)?s:nr(r[o+1])?[]:{})}Ne(a,c,d),a=a[c]}return e}function $r(e,r,t){for(var n=-1,o=r.length,u={};++n<o;){var i=r[n],a=be(e,i);t(a,i)&&Cr(u,ye(i,e),a)}return u}function Sr(e,r){var t=e.length;for(e.sort(r);t--;)e[t]=e[t].value;return e}function Gr(e,r){if(e!==r){var t=e!==void 0,n=e===null,o=e===e,u=C(e),i=r!==void 0,a=r===null,c=r===r,d=C(r);if(!a&&!d&&!u&&e>r||u&&i&&c&&!a&&!d||n&&i&&c||!t&&c||!o)return 1;if(!n&&!u&&!d&&e<r||d&&t&&o&&!n&&!u||a&&t&&o||!i&&o||!c)return-1}return 0}function Vr(e,r,t){for(var n=-1,o=e.criteria,u=r.criteria,i=o.length,a=t.length;++n<i;){var c=Gr(o[n],u[n]);if(c){if(n>=a)return c;var d=t[n];return c*(d=="desc"?-1:1)}}return e.index-r.index}function Yr(e,r,t){r.length?r=M(r,function(u){return H(u)?function(i){return be(i,u.length===1?u[0]:u)}:u}):r=[J];var n=-1;r=M(r,rr(O));var o=Ie(e,function(u,i,a){var c=M(r,function(d){return d(u)});return{criteria:c,index:++n,value:u}});return Sr(o,function(u,i){return Vr(u,i,t)})}function Fr(e,r){return $r(e,r,function(t,n){return Je(e,n)})}var Br=wr(function(e,r){return e==null?{}:Fr(e,r)});const V=Br;var qr=Math.ceil,zr=Math.max;function Ar(e,r,t,n){for(var o=-1,u=zr(qr((r-e)/(t||1)),0),i=Array(u);u--;)i[++o]=e,e+=t;return i}function Dr(e){return function(r,t,n){return n&&typeof n!="number"&&$(r,t,n)&&(t=n=void 0),r=T(r),t===void 0?(t=r,r=0):t=T(t),n=n===void 0?r<t?1:-1:T(n),Ar(r,t,n)}}var Kr=Dr();const E=Kr;var Wr=ke(function(e,r){if(e==null)return[];var t=r.length;return t>1&&$(e,r[0],r[1])?r=[]:t>2&&$(r[0],r[1],r[2])&&(r=[r[0]]),Yr(e,we(r),[])});const L=Wr;var Xr=0;function ee(e){var r=++Xr;return Ae(e)+r}function Hr(e,r,t){for(var n=-1,o=e.length,u=r.length,i={};++n<o;){var a=n<u?r[n]:void 0;t(i,e[n],a)}return i}function Jr(e,r){return Hr(e||[],r||[],Ne)}class Qr{constructor(){var r={};r._next=r._prev=r,this._sentinel=r}dequeue(){var r=this._sentinel,t=r._prev;if(t!==r)return ae(t),t}enqueue(r){var t=this._sentinel;r._prev&&r._next&&ae(r),r._next=t._next,t._next._prev=r,t._next=r,r._prev=t}toString(){for(var r=[],t=this._sentinel,n=t._prev;n!==t;)r.push(JSON.stringify(n,Ur)),n=n._prev;return"["+r.join(", ")+"]"}}function ae(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function Ur(e,r){if(e!=="_next"&&e!=="_prev")return r}var Zr=or(1);function et(e,r){if(e.nodeCount()<=1)return[];var t=tt(e,r||Zr),n=rt(t.graph,t.buckets,t.zeroIdx);return N(p(n,function(o){return e.outEdges(o.v,o.w)}))}function rt(e,r,t){for(var n=[],o=r[r.length-1],u=r[0],i;e.nodeCount();){for(;i=u.dequeue();)q(e,r,t,i);for(;i=o.dequeue();)q(e,r,t,i);if(e.nodeCount()){for(var a=r.length-2;a>0;--a)if(i=r[a].dequeue(),i){n=n.concat(q(e,r,t,i,!0));break}}}return n}function q(e,r,t,n,o){var u=o?[]:void 0;return f(e.inEdges(n.v),function(i){var a=e.edge(i),c=e.node(i.v);o&&u.push({v:i.v,w:i.w}),c.out-=a,X(r,t,c)}),f(e.outEdges(n.v),function(i){var a=e.edge(i),c=i.w,d=e.node(c);d.in-=a,X(r,t,d)}),e.removeNode(n.v),u}function tt(e,r){var t=new m,n=0,o=0;f(e.nodes(),function(a){t.setNode(a,{v:a,in:0,out:0})}),f(e.edges(),function(a){var c=t.edge(a.v,a.w)||0,d=r(a),s=c+d;t.setEdge(a.v,a.w,s),o=Math.max(o,t.node(a.v).out+=d),n=Math.max(n,t.node(a.w).in+=d)});var u=E(o+n+3).map(function(){return new Qr}),i=n+1;return f(t.nodes(),function(a){X(u,i,t.node(a))}),{graph:t,buckets:u,zeroIdx:i}}function X(e,r,t){t.out?t.in?e[t.out-t.in+r].enqueue(t):e[e.length-1].enqueue(t):e[0].enqueue(t)}function nt(e){var r=e.graph().acyclicer==="greedy"?et(e,t(e)):ot(e);f(r,function(n){var o=e.edge(n);e.removeEdge(n),o.forwardName=n.name,o.reversed=!0,e.setEdge(n.w,n.v,o,ee("rev"))});function t(n){return function(o){return n.edge(o).weight}}}function ot(e){var r=[],t={},n={};function o(u){Object.prototype.hasOwnProperty.call(n,u)||(n[u]=!0,t[u]=!0,f(e.outEdges(u),function(i){Object.prototype.hasOwnProperty.call(t,i.w)?r.push(i):o(i.w)}),delete t[u])}return f(e.nodes(),o),r}function it(e){f(e.edges(),function(r){var t=e.edge(r);if(t.reversed){e.removeEdge(r);var n=t.forwardName;delete t.reversed,delete t.forwardName,e.setEdge(r.w,r.v,t,n)}})}function _(e,r,t,n){var o;do o=ee(n);while(e.hasNode(o));return t.dummy=r,e.setNode(o,t),o}function ut(e){var r=new m().setGraph(e.graph());return f(e.nodes(),function(t){r.setNode(t,e.node(t))}),f(e.edges(),function(t){var n=r.edge(t.v,t.w)||{weight:0,minlen:1},o=e.edge(t);r.setEdge(t.v,t.w,{weight:n.weight+o.weight,minlen:Math.max(n.minlen,o.minlen)})}),r}function Re(e){var r=new m({multigraph:e.isMultigraph()}).setGraph(e.graph());return f(e.nodes(),function(t){e.children(t).length||r.setNode(t,e.node(t))}),f(e.edges(),function(t){r.setEdge(t,e.edge(t))}),r}function ce(e,r){var t=e.x,n=e.y,o=r.x-t,u=r.y-n,i=e.width/2,a=e.height/2;if(!o&&!u)throw new Error("Not possible to find intersection inside of the rectangle");var c,d;return Math.abs(u)*i>Math.abs(o)*a?(u<0&&(a=-a),c=a*o/u,d=a):(o<0&&(i=-i),c=i,d=i*u/o),{x:t+c,y:n+d}}function B(e){var r=p(E(Le(e)+1),function(){return[]});return f(e.nodes(),function(t){var n=e.node(t),o=n.rank;b(o)||(r[o][n.order]=t)}),r}function at(e){var r=P(p(e.nodes(),function(t){return e.node(t).rank}));f(e.nodes(),function(t){var n=e.node(t);Pe(n,"rank")&&(n.rank-=r)})}function ct(e){var r=P(p(e.nodes(),function(u){return e.node(u).rank})),t=[];f(e.nodes(),function(u){var i=e.node(u).rank-r;t[i]||(t[i]=[]),t[i].push(u)});var n=0,o=e.graph().nodeRankFactor;f(t,function(u,i){b(u)&&i%o!==0?--n:n&&f(u,function(a){e.node(a).rank+=n})})}function de(e,r,t,n){var o={width:0,height:0};return arguments.length>=4&&(o.rank=t,o.order=n),_(e,"border",o,r)}function Le(e){return y(p(e.nodes(),function(r){var t=e.node(r).rank;if(!b(t))return t}))}function dt(e,r){var t={lhs:[],rhs:[]};return f(e,function(n){r(n)?t.lhs.push(n):t.rhs.push(n)}),t}function ft(e,r){return r()}function st(e){function r(t){var n=e.children(t),o=e.node(t);if(n.length&&f(n,r),Object.prototype.hasOwnProperty.call(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var u=o.minRank,i=o.maxRank+1;u<i;++u)fe(e,"borderLeft","_bl",t,o,u),fe(e,"borderRight","_br",t,o,u)}}f(e.children(),r)}function fe(e,r,t,n,o,u){var i={width:0,height:0,rank:u,borderType:r},a=o[r][u-1],c=_(e,"border",i,t);o[r][u]=c,e.setParent(c,n),a&&e.setEdge(a,c,{weight:1})}function ht(e){var r=e.graph().rankdir.toLowerCase();(r==="lr"||r==="rl")&&Me(e)}function vt(e){var r=e.graph().rankdir.toLowerCase();(r==="bt"||r==="rl")&&gt(e),(r==="lr"||r==="rl")&&(lt(e),Me(e))}function Me(e){f(e.nodes(),function(r){se(e.node(r))}),f(e.edges(),function(r){se(e.edge(r))})}function se(e){var r=e.width;e.width=e.height,e.height=r}function gt(e){f(e.nodes(),function(r){z(e.node(r))}),f(e.edges(),function(r){var t=e.edge(r);f(t.points,z),Object.prototype.hasOwnProperty.call(t,"y")&&z(t)})}function z(e){e.y=-e.y}function lt(e){f(e.nodes(),function(r){A(e.node(r))}),f(e.edges(),function(r){var t=e.edge(r);f(t.points,A),Object.prototype.hasOwnProperty.call(t,"x")&&A(t)})}function A(e){var r=e.x;e.x=e.y,e.y=r}function pt(e){e.graph().dummyChains=[],f(e.edges(),function(r){wt(e,r)})}function wt(e,r){var t=r.v,n=e.node(t).rank,o=r.w,u=e.node(o).rank,i=r.name,a=e.edge(r),c=a.labelRank;if(u!==n+1){e.removeEdge(r);var d=void 0,s,h;for(h=0,++n;n<u;++h,++n)a.points=[],d={width:0,height:0,edgeLabel:a,edgeObj:r,rank:n},s=_(e,"edge",d,"_d"),n===c&&(d.width=a.width,d.height=a.height,d.dummy="edge-label",d.labelpos=a.labelpos),e.setEdge(t,s,{weight:a.weight},i),h===0&&e.graph().dummyChains.push(s),t=s;e.setEdge(t,o,{weight:a.weight},i)}}function bt(e){f(e.graph().dummyChains,function(r){var t=e.node(r),n=t.edgeLabel,o;for(e.setEdge(t.edgeObj,n);t.dummy;)o=e.successors(r)[0],e.removeNode(r),n.points.push({x:t.x,y:t.y}),t.dummy==="edge-label"&&(n.x=t.x,n.y=t.y,n.width=t.width,n.height=t.height),r=o,t=e.node(r)})}function re(e){var r={};function t(n){var o=e.node(n);if(Object.prototype.hasOwnProperty.call(r,n))return o.rank;r[n]=!0;var u=P(p(e.outEdges(n),function(i){return t(i.w)-e.edge(i).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),o.rank=u}f(e.sources(),t)}function j(e,r){return e.node(r.w).rank-e.node(r.v).rank-e.edge(r).minlen}function Te(e){var r=new m({directed:!1}),t=e.nodes()[0],n=e.nodeCount();r.setNode(t,{});for(var o,u;mt(r,e)<n;)o=yt(r,e),u=r.hasNode(o.v)?j(e,o):-j(e,o),xt(r,e,u);return r}function mt(e,r){function t(n){f(r.nodeEdges(n),function(o){var u=o.v,i=n===u?o.w:u;!e.hasNode(i)&&!j(r,o)&&(e.setNode(i,{}),e.setEdge(n,i,{}),t(i))})}return f(e.nodes(),t),e.nodeCount()}function yt(e,r){return Z(r.edges(),function(t){if(e.hasNode(t.v)!==e.hasNode(t.w))return j(r,t)})}function xt(e,r,t){f(e.nodes(),function(n){r.node(n).rank+=t})}function Ce(e,r,t){H(r)||(r=[r]);var n=(e.isDirected()?e.successors:e.neighbors).bind(e),o=[],u={};return f(r,function(i){if(!e.hasNode(i))throw new Error("Graph does not have node: "+i);$e(e,i,t==="post",u,n,o)}),o}function $e(e,r,t,n,o,u){Object.prototype.hasOwnProperty.call(n,r)||(n[r]=!0,t||u.push(r),f(o(r),function(i){$e(e,i,t,n,o,u)}),t&&u.push(r))}function kt(e,r){return Ce(e,r,"post")}function Et(e,r){return Ce(e,r,"pre")}x.initLowLimValues=ne;x.initCutValues=te;x.calcCutValue=Se;x.leaveEdge=Ve;x.enterEdge=Ye;x.exchangeEdges=Fe;function x(e){e=ut(e),re(e);var r=Te(e);ne(r),te(r,e);for(var t,n;t=Ve(r);)n=Ye(r,e,t),Fe(r,e,t,n)}function te(e,r){var t=kt(e,e.nodes());t=t.slice(0,t.length-1),f(t,function(n){Ot(e,r,n)})}function Ot(e,r,t){var n=e.node(t),o=n.parent;e.edge(t,o).cutvalue=Se(e,r,t)}function Se(e,r,t){var n=e.node(t),o=n.parent,u=!0,i=r.edge(t,o),a=0;return i||(u=!1,i=r.edge(o,t)),a=i.weight,f(r.nodeEdges(t),function(c){var d=c.v===t,s=d?c.w:c.v;if(s!==o){var h=d===u,v=r.edge(c).weight;if(a+=h?v:-v,_t(e,t,s)){var g=e.edge(t,s).cutvalue;a+=h?-g:g}}}),a}function ne(e,r){arguments.length<2&&(r=e.nodes()[0]),Ge(e,{},1,r)}function Ge(e,r,t,n,o){var u=t,i=e.node(n);return r[n]=!0,f(e.neighbors(n),function(a){Object.prototype.hasOwnProperty.call(r,a)||(t=Ge(e,r,t,a,n))}),i.low=u,i.lim=t++,o?i.parent=o:delete i.parent,t}function Ve(e){return Q(e.edges(),function(r){return e.edge(r).cutvalue<0})}function Ye(e,r,t){var n=t.v,o=t.w;r.hasEdge(n,o)||(n=t.w,o=t.v);var u=e.node(n),i=e.node(o),a=u,c=!1;u.lim>i.lim&&(a=i,c=!0);var d=R(r.edges(),function(s){return c===he(e,e.node(s.v),a)&&c!==he(e,e.node(s.w),a)});return Z(d,function(s){return j(r,s)})}function Fe(e,r,t,n){var o=t.v,u=t.w;e.removeEdge(o,u),e.setEdge(n.v,n.w,{}),ne(e),te(e,r),Nt(e,r)}function Nt(e,r){var t=Q(e.nodes(),function(o){return!r.node(o).parent}),n=Et(e,t);n=n.slice(1),f(n,function(o){var u=e.node(o).parent,i=r.edge(o,u),a=!1;i||(i=r.edge(u,o),a=!0),r.node(o).rank=r.node(u).rank+(a?i.minlen:-i.minlen)})}function _t(e,r,t){return e.hasEdge(r,t)}function he(e,r,t){return t.low<=r.lim&&r.lim<=t.lim}function It(e){switch(e.graph().ranker){case"network-simplex":ve(e);break;case"tight-tree":jt(e);break;case"longest-path":Pt(e);break;default:ve(e)}}var Pt=re;function jt(e){re(e),Te(e)}function ve(e){x(e)}function Rt(e){var r=_(e,"root",{},"_root"),t=Lt(e),n=y(k(t))-1,o=2*n+1;e.graph().nestingRoot=r,f(e.edges(),function(i){e.edge(i).minlen*=o});var u=Mt(e)+1;f(e.children(),function(i){Be(e,r,o,u,n,t,i)}),e.graph().nodeRankFactor=o}function Be(e,r,t,n,o,u,i){var a=e.children(i);if(!a.length){i!==r&&e.setEdge(r,i,{weight:0,minlen:t});return}var c=de(e,"_bt"),d=de(e,"_bb"),s=e.node(i);e.setParent(c,i),s.borderTop=c,e.setParent(d,i),s.borderBottom=d,f(a,function(h){Be(e,r,t,n,o,u,h);var v=e.node(h),g=v.borderTop?v.borderTop:h,l=v.borderBottom?v.borderBottom:h,w=v.borderTop?n:2*n,I=g!==l?1:o-u[i]+1;e.setEdge(c,g,{weight:w,minlen:I,nestingEdge:!0}),e.setEdge(l,d,{weight:w,minlen:I,nestingEdge:!0})}),e.parent(i)||e.setEdge(r,c,{weight:0,minlen:o+u[i]})}function Lt(e){var r={};function t(n,o){var u=e.children(n);u&&u.length&&f(u,function(i){t(i,o+1)}),r[n]=o}return f(e.children(),function(n){t(n,1)}),r}function Mt(e){return Y(e.edges(),function(r,t){return r+e.edge(t).weight},0)}function Tt(e){var r=e.graph();e.removeNode(r.nestingRoot),delete r.nestingRoot,f(e.edges(),function(t){var n=e.edge(t);n.nestingEdge&&e.removeEdge(t)})}function Ct(e,r,t){var n={},o;f(t,function(u){for(var i=e.parent(u),a,c;i;){if(a=e.parent(i),a?(c=n[a],n[a]=i):(c=o,o=i),c&&c!==i){r.setEdge(c,i);return}i=a}})}function $t(e,r,t){var n=St(e),o=new m({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(u){return e.node(u)});return f(e.nodes(),function(u){var i=e.node(u),a=e.parent(u);(i.rank===r||i.minRank<=r&&r<=i.maxRank)&&(o.setNode(u),o.setParent(u,a||n),f(e[t](u),function(c){var d=c.v===u?c.w:c.v,s=o.edge(d,u),h=b(s)?0:s.weight;o.setEdge(d,u,{weight:e.edge(c).weight+h})}),Object.prototype.hasOwnProperty.call(i,"minRank")&&o.setNode(u,{borderLeft:i.borderLeft[r],borderRight:i.borderRight[r]}))}),o}function St(e){for(var r;e.hasNode(r=ee("_root")););return r}function Gt(e,r){for(var t=0,n=1;n<r.length;++n)t+=Vt(e,r[n-1],r[n]);return t}function Vt(e,r,t){for(var n=Jr(t,p(t,function(d,s){return s})),o=N(p(r,function(d){return L(p(e.outEdges(d),function(s){return{pos:n[s.w],weight:e.edge(s).weight}}),"pos")})),u=1;u<t.length;)u<<=1;var i=2*u-1;u-=1;var a=p(new Array(i),function(){return 0}),c=0;return f(o.forEach(function(d){var s=d.pos+u;a[s]+=d.weight;for(var h=0;s>0;)s%2&&(h+=a[s+1]),s=s-1>>1,a[s]+=d.weight;c+=d.weight*h})),c}function Yt(e){var r={},t=R(e.nodes(),function(a){return!e.children(a).length}),n=y(p(t,function(a){return e.node(a).rank})),o=p(E(n+1),function(){return[]});function u(a){if(!Pe(r,a)){r[a]=!0;var c=e.node(a);o[c.rank].push(a),f(e.successors(a),u)}}var i=L(t,function(a){return e.node(a).rank});return f(i,u),o}function Ft(e,r){return p(r,function(t){var n=e.inEdges(t);if(n.length){var o=Y(n,function(u,i){var a=e.edge(i),c=e.node(i.v);return{sum:u.sum+a.weight*c.order,weight:u.weight+a.weight}},{sum:0,weight:0});return{v:t,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:t}})}function Bt(e,r){var t={};f(e,function(o,u){var i=t[o.v]={indegree:0,in:[],out:[],vs:[o.v],i:u};b(o.barycenter)||(i.barycenter=o.barycenter,i.weight=o.weight)}),f(r.edges(),function(o){var u=t[o.v],i=t[o.w];!b(u)&&!b(i)&&(i.indegree++,u.out.push(t[o.w]))});var n=R(t,function(o){return!o.indegree});return qt(n)}function qt(e){var r=[];function t(u){return function(i){i.merged||(b(i.barycenter)||b(u.barycenter)||i.barycenter>=u.barycenter)&&zt(u,i)}}function n(u){return function(i){i.in.push(u),--i.indegree===0&&e.push(i)}}for(;e.length;){var o=e.pop();r.push(o),f(o.in.reverse(),t(o)),f(o.out,n(o))}return p(R(r,function(u){return!u.merged}),function(u){return V(u,["vs","i","barycenter","weight"])})}function zt(e,r){var t=0,n=0;e.weight&&(t+=e.barycenter*e.weight,n+=e.weight),r.weight&&(t+=r.barycenter*r.weight,n+=r.weight),e.vs=r.vs.concat(e.vs),e.barycenter=t/n,e.weight=n,e.i=Math.min(r.i,e.i),r.merged=!0}function At(e,r){var t=dt(e,function(s){return Object.prototype.hasOwnProperty.call(s,"barycenter")}),n=t.lhs,o=L(t.rhs,function(s){return-s.i}),u=[],i=0,a=0,c=0;n.sort(Dt(!!r)),c=ge(u,o,c),f(n,function(s){c+=s.vs.length,u.push(s.vs),i+=s.barycenter*s.weight,a+=s.weight,c=ge(u,o,c)});var d={vs:N(u)};return a&&(d.barycenter=i/a,d.weight=a),d}function ge(e,r,t){for(var n;r.length&&(n=G(r)).i<=t;)r.pop(),e.push(n.vs),t++;return t}function Dt(e){return function(r,t){return r.barycenter<t.barycenter?-1:r.barycenter>t.barycenter?1:e?t.i-r.i:r.i-t.i}}function qe(e,r,t,n){var o=e.children(r),u=e.node(r),i=u?u.borderLeft:void 0,a=u?u.borderRight:void 0,c={};i&&(o=R(o,function(l){return l!==i&&l!==a}));var d=Ft(e,o);f(d,function(l){if(e.children(l.v).length){var w=qe(e,l.v,t,n);c[l.v]=w,Object.prototype.hasOwnProperty.call(w,"barycenter")&&Wt(l,w)}});var s=Bt(d,t);Kt(s,c);var h=At(s,n);if(i&&(h.vs=N([i,h.vs,a]),e.predecessors(i).length)){var v=e.node(e.predecessors(i)[0]),g=e.node(e.predecessors(a)[0]);Object.prototype.hasOwnProperty.call(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+v.order+g.order)/(h.weight+2),h.weight+=2}return h}function Kt(e,r){f(e,function(t){t.vs=N(t.vs.map(function(n){return r[n]?r[n].vs:n}))})}function Wt(e,r){b(e.barycenter)?(e.barycenter=r.barycenter,e.weight=r.weight):(e.barycenter=(e.barycenter*e.weight+r.barycenter*r.weight)/(e.weight+r.weight),e.weight+=r.weight)}function Xt(e){var r=Le(e),t=le(e,E(1,r+1),"inEdges"),n=le(e,E(r-1,-1,-1),"outEdges"),o=Yt(e);pe(e,o);for(var u=Number.POSITIVE_INFINITY,i,a=0,c=0;c<4;++a,++c){Ht(a%2?t:n,a%4>=2),o=B(e);var d=Gt(e,o);d<u&&(c=0,i=yr(o),u=d)}pe(e,i)}function le(e,r,t){return p(r,function(n){return $t(e,n,t)})}function Ht(e,r){var t=new m;f(e,function(n){var o=n.graph().root,u=qe(n,o,t,r);f(u.vs,function(i,a){n.node(i).order=a}),Ct(n,t,u.vs)})}function pe(e,r){f(r,function(t){f(t,function(n,o){e.node(n).order=o})})}function Jt(e){var r=Ut(e);f(e.graph().dummyChains,function(t){for(var n=e.node(t),o=n.edgeObj,u=Qt(e,r,o.v,o.w),i=u.path,a=u.lca,c=0,d=i[c],s=!0;t!==o.w;){if(n=e.node(t),s){for(;(d=i[c])!==a&&e.node(d).maxRank<n.rank;)c++;d===a&&(s=!1)}if(!s){for(;c<i.length-1&&e.node(d=i[c+1]).minRank<=n.rank;)c++;d=i[c]}e.setParent(t,d),t=e.successors(t)[0]}})}function Qt(e,r,t,n){var o=[],u=[],i=Math.min(r[t].low,r[n].low),a=Math.max(r[t].lim,r[n].lim),c,d;c=t;do c=e.parent(c),o.push(c);while(c&&(r[c].low>i||a>r[c].lim));for(d=c,c=n;(c=e.parent(c))!==d;)u.push(c);return{path:o.concat(u.reverse()),lca:d}}function Ut(e){var r={},t=0;function n(o){var u=t;f(e.children(o),n),r[o]={low:u,lim:t++}}return f(e.children(),n),r}function Zt(e,r){var t={};function n(o,u){var i=0,a=0,c=o.length,d=G(u);return f(u,function(s,h){var v=rn(e,s),g=v?e.node(v).order:c;(v||s===d)&&(f(u.slice(a,h+1),function(l){f(e.predecessors(l),function(w){var I=e.node(w),oe=I.order;(oe<i||g<oe)&&!(I.dummy&&e.node(l).dummy)&&ze(t,w,l)})}),a=h+1,i=g)}),u}return Y(r,n),t}function en(e,r){var t={};function n(u,i,a,c,d){var s;f(E(i,a),function(h){s=u[h],e.node(s).dummy&&f(e.predecessors(s),function(v){var g=e.node(v);g.dummy&&(g.order<c||g.order>d)&&ze(t,v,s)})})}function o(u,i){var a=-1,c,d=0;return f(i,function(s,h){if(e.node(s).dummy==="border"){var v=e.predecessors(s);v.length&&(c=e.node(v[0]).order,n(i,d,h,a,c),d=h,a=c)}n(i,d,i.length,c,u.length)}),i}return Y(r,o),t}function rn(e,r){if(e.node(r).dummy)return Q(e.predecessors(r),function(t){return e.node(t).dummy})}function ze(e,r,t){if(r>t){var n=r;r=t,t=n}Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(e,r,{enumerable:!0,configurable:!0,value:{},writable:!0});var o=e[r];Object.defineProperty(o,t,{enumerable:!0,configurable:!0,value:!0,writable:!0})}function tn(e,r,t){if(r>t){var n=r;r=t,t=n}return!!e[r]&&Object.prototype.hasOwnProperty.call(e[r],t)}function nn(e,r,t,n){var o={},u={},i={};return f(r,function(a){f(a,function(c,d){o[c]=c,u[c]=c,i[c]=d})}),f(r,function(a){var c=-1;f(a,function(d){var s=n(d);if(s.length){s=L(s,function(w){return i[w]});for(var h=(s.length-1)/2,v=Math.floor(h),g=Math.ceil(h);v<=g;++v){var l=s[v];u[d]===d&&c<i[l]&&!tn(t,d,l)&&(u[l]=d,u[d]=o[d]=o[l],c=i[l])}}})}),{root:o,align:u}}function on(e,r,t,n,o){var u={},i=un(e,r,t,o),a=o?"borderLeft":"borderRight";function c(h,v){for(var g=i.nodes(),l=g.pop(),w={};l;)w[l]?h(l):(w[l]=!0,g.push(l),g=g.concat(v(l))),l=g.pop()}function d(h){u[h]=i.inEdges(h).reduce(function(v,g){return Math.max(v,u[g.v]+i.edge(g))},0)}function s(h){var v=i.outEdges(h).reduce(function(l,w){return Math.min(l,u[w.w]-i.edge(w))},Number.POSITIVE_INFINITY),g=e.node(h);v!==Number.POSITIVE_INFINITY&&g.borderType!==a&&(u[h]=Math.max(u[h],v))}return c(d,i.predecessors.bind(i)),c(s,i.successors.bind(i)),f(n,function(h){u[h]=u[t[h]]}),u}function un(e,r,t,n){var o=new m,u=e.graph(),i=sn(u.nodesep,u.edgesep,n);return f(r,function(a){var c;f(a,function(d){var s=t[d];if(o.setNode(s),c){var h=t[c],v=o.edge(h,s);o.setEdge(h,s,Math.max(i(e,d,c),v||0))}c=d})}),o}function an(e,r){return Z(k(r),function(t){var n=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return Pr(t,function(u,i){var a=hn(e,i)/2;n=Math.max(u+a,n),o=Math.min(u-a,o)}),n-o})}function cn(e,r){var t=k(r),n=P(t),o=y(t);f(["u","d"],function(u){f(["l","r"],function(i){var a=u+i,c=e[a],d;if(c!==r){var s=k(c);d=i==="l"?n-P(s):o-y(s),d&&(e[a]=F(c,function(h){return h+d}))}})})}function dn(e,r){return F(e.ul,function(t,n){if(r)return e[r.toLowerCase()][n];var o=L(p(e,n));return(o[1]+o[2])/2})}function fn(e){var r=B(e),t=W(Zt(e,r),en(e,r)),n={},o;f(["u","d"],function(i){o=i==="u"?r:k(r).reverse(),f(["l","r"],function(a){a==="r"&&(o=p(o,function(h){return k(h).reverse()}));var c=(i==="u"?e.predecessors:e.successors).bind(e),d=nn(e,o,t,c),s=on(e,o,d.root,d.align,a==="r");a==="r"&&(s=F(s,function(h){return-h})),n[i+a]=s})});var u=an(e,n);return cn(n,u),dn(n,e.graph().align)}function sn(e,r,t){return function(n,o,u){var i=n.node(o),a=n.node(u),c=0,d;if(c+=i.width/2,Object.prototype.hasOwnProperty.call(i,"labelpos"))switch(i.labelpos.toLowerCase()){case"l":d=-i.width/2;break;case"r":d=i.width/2;break}if(d&&(c+=t?d:-d),d=0,c+=(i.dummy?r:e)/2,c+=(a.dummy?r:e)/2,c+=a.width/2,Object.prototype.hasOwnProperty.call(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":d=a.width/2;break;case"r":d=-a.width/2;break}return d&&(c+=t?d:-d),d=0,c}}function hn(e,r){return e.node(r).width}function vn(e){e=Re(e),gn(e),jr(fn(e),function(r,t){e.node(t).x=r})}function gn(e){var r=B(e),t=e.graph().ranksep,n=0;f(r,function(o){var u=y(p(o,function(i){return e.node(i).height}));f(o,function(i){e.node(i).y=n+u/2}),n+=u+t})}function Fn(e,r){var t=ft;t("layout",()=>{var n=t("  buildLayoutGraph",()=>Nn(e));t("  runLayout",()=>ln(n,t)),t("  updateInputGraph",()=>pn(e,n))})}function ln(e,r){r("    makeSpaceForEdgeLabels",()=>_n(e)),r("    removeSelfEdges",()=>$n(e)),r("    acyclic",()=>nt(e)),r("    nestingGraph.run",()=>Rt(e)),r("    rank",()=>It(Re(e))),r("    injectEdgeLabelProxies",()=>In(e)),r("    removeEmptyRanks",()=>ct(e)),r("    nestingGraph.cleanup",()=>Tt(e)),r("    normalizeRanks",()=>at(e)),r("    assignRankMinMax",()=>Pn(e)),r("    removeEdgeLabelProxies",()=>jn(e)),r("    normalize.run",()=>pt(e)),r("    parentDummyChains",()=>Jt(e)),r("    addBorderSegments",()=>st(e)),r("    order",()=>Xt(e)),r("    insertSelfEdges",()=>Sn(e)),r("    adjustCoordinateSystem",()=>ht(e)),r("    position",()=>vn(e)),r("    positionSelfEdges",()=>Gn(e)),r("    removeBorderNodes",()=>Cn(e)),r("    normalize.undo",()=>bt(e)),r("    fixupEdgeLabelCoords",()=>Mn(e)),r("    undoCoordinateSystem",()=>vt(e)),r("    translateGraph",()=>Rn(e)),r("    assignNodeIntersects",()=>Ln(e)),r("    reversePoints",()=>Tn(e)),r("    acyclic.undo",()=>it(e))}function pn(e,r){f(e.nodes(),function(t){var n=e.node(t),o=r.node(t);n&&(n.x=o.x,n.y=o.y,r.children(t).length&&(n.width=o.width,n.height=o.height))}),f(e.edges(),function(t){var n=e.edge(t),o=r.edge(t);n.points=o.points,Object.prototype.hasOwnProperty.call(o,"x")&&(n.x=o.x,n.y=o.y)}),e.graph().width=r.graph().width,e.graph().height=r.graph().height}var wn=["nodesep","edgesep","ranksep","marginx","marginy"],bn={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},mn=["acyclicer","ranker","rankdir","align"],yn=["width","height"],xn={width:0,height:0},kn=["minlen","weight","width","height","labeloffset"],En={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},On=["labelpos"];function Nn(e){var r=new m({multigraph:!0,compound:!0}),t=K(e.graph());return r.setGraph(W({},bn,D(t,wn),V(t,mn))),f(e.nodes(),function(n){var o=K(e.node(n));r.setNode(n,Er(D(o,yn),xn)),r.setParent(n,e.parent(n))}),f(e.edges(),function(n){var o=K(e.edge(n));r.setEdge(n,W({},En,D(o,kn),V(o,On)))}),r}function _n(e){var r=e.graph();r.ranksep/=2,f(e.edges(),function(t){var n=e.edge(t);n.minlen*=2,n.labelpos.toLowerCase()!=="c"&&(r.rankdir==="TB"||r.rankdir==="BT"?n.width+=n.labeloffset:n.height+=n.labeloffset)})}function In(e){f(e.edges(),function(r){var t=e.edge(r);if(t.width&&t.height){var n=e.node(r.v),o=e.node(r.w),u={rank:(o.rank-n.rank)/2+n.rank,e:r};_(e,"edge-proxy",u,"_ep")}})}function Pn(e){var r=0;f(e.nodes(),function(t){var n=e.node(t);n.borderTop&&(n.minRank=e.node(n.borderTop).rank,n.maxRank=e.node(n.borderBottom).rank,r=y(r,n.maxRank))}),e.graph().maxRank=r}function jn(e){f(e.nodes(),function(r){var t=e.node(r);t.dummy==="edge-proxy"&&(e.edge(t.e).labelRank=t.rank,e.removeNode(r))})}function Rn(e){var r=Number.POSITIVE_INFINITY,t=0,n=Number.POSITIVE_INFINITY,o=0,u=e.graph(),i=u.marginx||0,a=u.marginy||0;function c(d){var s=d.x,h=d.y,v=d.width,g=d.height;r=Math.min(r,s-v/2),t=Math.max(t,s+v/2),n=Math.min(n,h-g/2),o=Math.max(o,h+g/2)}f(e.nodes(),function(d){c(e.node(d))}),f(e.edges(),function(d){var s=e.edge(d);Object.prototype.hasOwnProperty.call(s,"x")&&c(s)}),r-=i,n-=a,f(e.nodes(),function(d){var s=e.node(d);s.x-=r,s.y-=n}),f(e.edges(),function(d){var s=e.edge(d);f(s.points,function(h){h.x-=r,h.y-=n}),Object.prototype.hasOwnProperty.call(s,"x")&&(s.x-=r),Object.prototype.hasOwnProperty.call(s,"y")&&(s.y-=n)}),u.width=t-r+i,u.height=o-n+a}function Ln(e){f(e.edges(),function(r){var t=e.edge(r),n=e.node(r.v),o=e.node(r.w),u,i;t.points?(u=t.points[0],i=t.points[t.points.length-1]):(t.points=[],u=o,i=n),t.points.unshift(ce(n,u)),t.points.push(ce(o,i))})}function Mn(e){f(e.edges(),function(r){var t=e.edge(r);if(Object.prototype.hasOwnProperty.call(t,"x"))switch((t.labelpos==="l"||t.labelpos==="r")&&(t.width-=t.labeloffset),t.labelpos){case"l":t.x-=t.width/2+t.labeloffset;break;case"r":t.x+=t.width/2+t.labeloffset;break}})}function Tn(e){f(e.edges(),function(r){var t=e.edge(r);t.reversed&&t.points.reverse()})}function Cn(e){f(e.nodes(),function(r){if(e.children(r).length){var t=e.node(r),n=e.node(t.borderTop),o=e.node(t.borderBottom),u=e.node(G(t.borderLeft)),i=e.node(G(t.borderRight));t.width=Math.abs(i.x-u.x),t.height=Math.abs(o.y-n.y),t.x=u.x+t.width/2,t.y=n.y+t.height/2}}),f(e.nodes(),function(r){e.node(r).dummy==="border"&&e.removeNode(r)})}function $n(e){f(e.edges(),function(r){if(r.v===r.w){var t=e.node(r.v);t.selfEdges||(t.selfEdges=[]),t.selfEdges.push({e:r,label:e.edge(r)}),e.removeEdge(r)}})}function Sn(e){var r=B(e);f(r,function(t){var n=0;f(t,function(o,u){var i=e.node(o);i.order=u+n,f(i.selfEdges,function(a){_(e,"selfedge",{width:a.label.width,height:a.label.height,rank:i.rank,order:u+ ++n,e:a.e,label:a.label},"_se")}),delete i.selfEdges})})}function Gn(e){f(e.nodes(),function(r){var t=e.node(r);if(t.dummy==="selfedge"){var n=e.node(t.e.v),o=n.x+n.width/2,u=n.y,i=t.x-o,a=n.height/2;e.setEdge(t.e,t.label),e.removeNode(r),t.label.points=[{x:o+2*i/3,y:u-a},{x:o+5*i/6,y:u-a},{x:o+i,y:u},{x:o+5*i/6,y:u+a},{x:o+2*i/3,y:u+a}],t.label.x=t.x,t.label.y=t.y}})}function D(e,r){return F(V(e,r),Number)}function K(e){var r={};return f(e,function(t,n){r[n.toLowerCase()]=t}),r}export{Er as P,Fn as W,V as j,E as k,ee as n,p as w};
