import{_ as n,r as t,o as r,c as h,b as e,e as i,d as a,f as s}from"./app-DFDsyZGc.js";const c={},o=s('<h1 id="分库分表原理与实践" tabindex="-1"><a class="header-anchor" href="#分库分表原理与实践"><span>分库分表原理与实践</span></a></h1><p>分库分表是应对大数据量、高并发场景下数据库性能瓶颈的常用架构手段。</p><h2 id="定义" tabindex="-1"><a class="header-anchor" href="#定义"><span>定义</span></a></h2><ul><li>分库：将数据按某种规则分散存储到多个数据库实例中。</li><li>分表：将单表数据按某种规则拆分到多个物理表中。</li></ul><h2 id="常见问题" tabindex="-1"><a class="header-anchor" href="#常见问题"><span>常见问题</span></a></h2><ul><li>跨库/跨表查询复杂</li><li>分布式事务难以保证强一致性</li><li>主键全局唯一性设计</li><li>数据迁移与扩容</li></ul><h2 id="应用场景" tabindex="-1"><a class="header-anchor" href="#应用场景"><span>应用场景</span></a></h2><ul><li>电商、社交、金融等大规模数据系统</li><li>订单、日志、用户等大表</li></ul><h2 id="数据倾斜问题" tabindex="-1"><a class="header-anchor" href="#数据倾斜问题"><span>数据倾斜问题</span></a></h2><p>数据倾斜是指某些分片（库/表）上的数据量或访问量远高于其他分片，导致部分节点压力过大，影响整体性能和可用性。</p><h3 id="成因" tabindex="-1"><a class="header-anchor" href="#成因"><span>成因</span></a></h3><ul><li>分片键选择不合理，导致数据分布不均</li><li>部分业务天然存在“超级用户”或“热点ID”</li></ul><h3 id="解决方案" tabindex="-1"><a class="header-anchor" href="#解决方案"><span>解决方案</span></a></h3><ul><li>优化分片键设计，选择高区分度字段</li><li>对热点数据单独拆分或做特殊处理（如热点库/表、缓存）</li><li>动态迁移数据，定期重分片</li></ul><h2 id="热点数据问题" tabindex="-1"><a class="header-anchor" href="#热点数据问题"><span>热点数据问题</span></a></h2><p>热点数据是指被频繁访问或更新的少量数据，容易成为系统瓶颈。</p><h3 id="成因-1" tabindex="-1"><a class="header-anchor" href="#成因-1"><span>成因</span></a></h3><ul><li>某些用户、商品、话题等访问量极高</li><li>活动期间产生的流量集中</li></ul><h3 id="解决方案-1" tabindex="-1"><a class="header-anchor" href="#解决方案-1"><span>解决方案</span></a></h3><ul><li>引入缓存（如 Redis）缓解数据库压力</li><li>热点数据单独存储或分库</li><li>采用异步写入、削峰填谷等手段</li></ul><h2 id="读扩散问题" tabindex="-1"><a class="header-anchor" href="#读扩散问题"><span>读扩散问题</span></a></h2><p>读扩散是指一次查询需要访问多个分库分表，导致查询效率下降，甚至带来网络和资源消耗的激增。</p><h3 id="成因-2" tabindex="-1"><a class="header-anchor" href="#成因-2"><span>成因</span></a></h3><ul><li>需要聚合多分片数据（如全局统计、跨表分页）</li><li>业务查询未能局部化</li></ul><h3 id="解决方案-2" tabindex="-1"><a class="header-anchor" href="#解决方案-2"><span>解决方案</span></a></h3><ul><li>业务层限制跨分片查询，尽量单分片操作</li><li>预聚合、冗余存储、引入中间汇总表</li><li>利用分布式中间件（如 ShardingSphere、Mycat）优化路由和聚合</li></ul><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h2>',27),d={href:"https://juejin.cn/post/6844904006436849672",target:"_blank",rel:"noopener noreferrer"},p={href:"https://www.infoq.cn/article/distributed-database-architecture",target:"_blank",rel:"noopener noreferrer"},u={href:"https://www.bilibili.com/video/BV1wM4y1t7wx?vd_source=2986f208574902129887e685377d2d3a",target:"_blank",rel:"noopener noreferrer"};function g(f,_){const l=t("ExternalLinkIcon");return r(),h("div",null,[o,e("ul",null,[e("li",null,[e("a",d,[i("分库分表原理与实践"),a(l)])]),e("li",null,[e("a",p,[i("分布式数据库架构设计"),a(l)])]),e("li",null,[e("a",u,[i("玩原神学编程-数据库分库分表是啥？读扩散又是啥？"),a(l)])])])])}const b=n(c,[["render",g],["__file","分库分表.html.vue"]]),x=JSON.parse('{"path":"/tech/%E6%9E%B6%E6%9E%84%E5%B8%88/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8.html","title":"分库分表原理与实践","lang":"zh-CN","frontmatter":{"title":"分库分表原理与实践","category":["架构师"],"description":"分库分表原理与实践 分库分表是应对大数据量、高并发场景下数据库性能瓶颈的常用架构手段。 定义 分库：将数据按某种规则分散存储到多个数据库实例中。 分表：将单表数据按某种规则拆分到多个物理表中。 常见问题 跨库/跨表查询复杂 分布式事务难以保证强一致性 主键全局唯一性设计 数据迁移与扩容 应用场景 电商、社交、金融等大规模数据系统 订单、日志、用户等大表...","gitInclude":[],"head":[["meta",{"property":"og:url","content":"https://github.com/King-sj/tech/%E6%9E%B6%E6%9E%84%E5%B8%88/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8.html"}],["meta",{"property":"og:site_name","content":"blog"}],["meta",{"property":"og:title","content":"分库分表原理与实践"}],["meta",{"property":"og:description","content":"分库分表原理与实践 分库分表是应对大数据量、高并发场景下数据库性能瓶颈的常用架构手段。 定义 分库：将数据按某种规则分散存储到多个数据库实例中。 分表：将单表数据按某种规则拆分到多个物理表中。 常见问题 跨库/跨表查询复杂 分布式事务难以保证强一致性 主键全局唯一性设计 数据迁移与扩容 应用场景 电商、社交、金融等大规模数据系统 订单、日志、用户等大表..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"KSJ"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"分库分表原理与实践\\",\\"image\\":[\\"\\"],\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"KSJ\\",\\"url\\":\\"https://github.com/King-sj\\"}]}"]]},"headers":[{"level":2,"title":"定义","slug":"定义","link":"#定义","children":[]},{"level":2,"title":"常见问题","slug":"常见问题","link":"#常见问题","children":[]},{"level":2,"title":"应用场景","slug":"应用场景","link":"#应用场景","children":[]},{"level":2,"title":"数据倾斜问题","slug":"数据倾斜问题","link":"#数据倾斜问题","children":[{"level":3,"title":"成因","slug":"成因","link":"#成因","children":[]},{"level":3,"title":"解决方案","slug":"解决方案","link":"#解决方案","children":[]}]},{"level":2,"title":"热点数据问题","slug":"热点数据问题","link":"#热点数据问题","children":[{"level":3,"title":"成因","slug":"成因-1","link":"#成因-1","children":[]},{"level":3,"title":"解决方案","slug":"解决方案-1","link":"#解决方案-1","children":[]}]},{"level":2,"title":"读扩散问题","slug":"读扩散问题","link":"#读扩散问题","children":[{"level":3,"title":"成因","slug":"成因-2","link":"#成因-2","children":[]},{"level":3,"title":"解决方案","slug":"解决方案-2","link":"#解决方案-2","children":[]}]},{"level":2,"title":"参考资料","slug":"参考资料","link":"#参考资料","children":[]}],"readingTime":{"minutes":1.98,"words":594},"filePathRelative":"tech/架构师/分库分表.md","excerpt":"\\n<p>分库分表是应对大数据量、高并发场景下数据库性能瓶颈的常用架构手段。</p>\\n<h2>定义</h2>\\n<ul>\\n<li>分库：将数据按某种规则分散存储到多个数据库实例中。</li>\\n<li>分表：将单表数据按某种规则拆分到多个物理表中。</li>\\n</ul>\\n<h2>常见问题</h2>\\n<ul>\\n<li>跨库/跨表查询复杂</li>\\n<li>分布式事务难以保证强一致性</li>\\n<li>主键全局唯一性设计</li>\\n<li>数据迁移与扩容</li>\\n</ul>\\n<h2>应用场景</h2>\\n<ul>\\n<li>电商、社交、金融等大规模数据系统</li>\\n<li>订单、日志、用户等大表</li>\\n</ul>","autoDesc":true}');export{b as comp,x as data};
